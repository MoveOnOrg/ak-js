function confirmLargeDonation(e){return!!$("form").data("confirmed")||($("#confirm-big-donation .donation-amount").text(e),$("#confirm-big-donation .btn.yes").click(function(){$("#confirm-big-donation").on("hidden.bs.modal",function(e){$("form").data("confirmed",!0).trigger("submit")}),$("#confirm-big-donation").modal("hide")}),$("#confirm-big-donation").modal(),!1)}function toggleAll(){$(this).closest("form").find("input.toggle").attr("checked",this.checked)}function handleListChanged(){var e=$(this).closest("form"),t=$("input.toggle:checked").length;0==t?t=$("input.toggle").length:e.find(".check-recipients-help").hide(),e.find(".to-count").text(t)}function showEmailForm(){var e=$(this).closest("form");return e.find(".roster-controls").slideUp("fast"),e.find(".contact-form").slideDown("fast"),!1}function handleJumpLink(){var e;if("email-cohosts-link"==this.id?e=$(".contact-cohosts"):"email-attendees-link"==this.id?e=$(".contact-attendees"):"invite-friends-link"==this.id&&(e=$("#taf")),/^email-/.test(this.id)){var t=e.closest("form").find('input[type="submit"].email');showEmailForm.apply(t,[])}return e.addClass("target"),!0}function confirmSubmit(){return confirm($(this).attr("data-confirm-message"))}function setFormAction(){var e=$(this).closest("form")[0];(e||e.action)&&(e.action.value=this.name)}function validateRoster(e){var t=e.action.value;/(change-role|remove)/.test(t)&&!$(e).find("input.toggle:checked").length&&(actionkit.errors["user_id:missing"]=actionkit.forms.errorMessage("event_roster_user_ids:missing")),"send_email"!=t||e.body.value||(actionkit.errors["body:missing"]=actionkit.forms.errorMessage("event_contact_body:missing"))}function confirmRoster(e){var t=e.action.value,i=$(e).find('input[name="'+t+'"]'),n=i.attr("confirm-message");return!n||confirm(n)}function toggleRow(e){var t=$(this).closest("tr").find(".toggle")[0];return t&&(t.checked=!t.checked),!1}function updateConfirmationMessage(){for(var e in actionkit.args)e.indexOf(":")>0&&1==actionkit.args[e]&&($("#ak-confirmation").text(actionkit.forms.text["error_"+e]),$("#ak-confirmation").show())}function shuffle(e){for(var t,i,n=e.length;0!==n;)i=Math.floor(Math.random()*n),n-=1,t=e[n],e[n]=e[i],e[i]=t;return e}function shuffleQuestions(){$(".randomized-options").each(function(){var e=$(this),t=[];e.find(".option").each(function(){var e=$(this);t.push(e.clone()),e.remove()}),shuffle(t),$.each(t,function(){e.append($(this))})})}(function(){var e,t=[].indexOf||function(e){for(var t=0,i=this.length;t<i;t++)if(t in this&&this[t]===e)return t;return-1};e=jQuery,e.fn.validateCreditCard=function(i,n){var a,o,r,s,l,c,u,m,d,f,p,h,g;for(s=[{name:"amex",pattern:/^3[47]/,valid_length:[15]},{name:"diners_club_carte_blanche",pattern:/^30[0-5]/,valid_length:[14]},{name:"diners_club_international",pattern:/^36/,valid_length:[14]},{name:"jcb",pattern:/^35(2[89]|[3-8][0-9])/,valid_length:[16]},{name:"laser",pattern:/^(6304|670[69]|6771)/,valid_length:[16,17,18,19]},{name:"visa_electron",pattern:/^(4026|417500|4508|4844|491(3|7))/,valid_length:[16]},{name:"visa",pattern:/^4/,valid_length:[16]},{name:"mastercard",pattern:/^5[1-5]/,valid_length:[16]},{name:"maestro",pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,valid_length:[12,13,14,15,16,17,18,19]},{name:"discover",pattern:/^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)/,valid_length:[16]}],a=!1,i&&("object"==typeof i?(n=i,a=!1,i=null):"function"==typeof i&&(a=!0)),null==n&&(n={}),null==n.accept&&(n.accept=function(){var e,t,i;for(i=[],e=0,t=s.length;e<t;e++)o=s[e],i.push(o.name);return i}()),g=n.accept,p=0,h=g.length;p<h;p++)if(r=g[p],t.call(function(){var e,t,i;for(i=[],e=0,t=s.length;e<t;e++)o=s[e],i.push(o.name);return i}(),r)<0)throw"Credit card type '"+r+"' is not supported";return l=function(e){var i,a,l;for(l=function(){var e,i,a,r;for(r=[],e=0,i=s.length;e<i;e++)o=s[e],a=o.name,t.call(n.accept,a)>=0&&r.push(o);return r}(),i=0,a=l.length;i<a;i++)if(r=l[i],e.match(r.pattern))return r;return null},u=function(e){var t,i,n,a,o,r;for(n=0,r=e.split("").reverse(),i=a=0,o=r.length;a<o;i=++a)t=r[i],t=+t,i%2?(t*=2,n+=t<10?t:t-9):n+=t;return n%10===0},c=function(e,i){var n;return n=e.length,t.call(i.valid_length,n)>=0},f=function(e){return function(e){var t,i;return r=l(e),i=!1,t=!1,null!=r&&(i=u(e),t=c(e,r)),{card_type:r,valid:i&&t,luhn_valid:i,length_valid:t}}}(this),d=function(t){return function(){var i;return i=m(e(t).val()),f(i)}}(this),m=function(e){return e.replace(/[ -]/g,"")},a?(this.on("input.jccv",function(t){return function(){return e(t).off("keyup.jccv"),i.call(t,d())}}(this)),this.on("keyup.jccv",function(e){return function(){return i.call(e,d())}}(this)),i.call(this,d()),this):d()}}).call(this),$(document).ready(function(){$("form").data("confirmed",!1).submit(function(e){var t=$("#total-to-split"),i=0,n=$("input:radio[name=amount]:checked");i=n.length>0?parseFloat(n.val()):parseFloat($("#amount_other_field").val()),t.length>0&&(i=parseFloat(t.val())),i>=250&&(confirmLargeDonation(i)||e.preventDefault())}),$("form input").keyup(function(){$("form").data("confirmed",!1)})});var EmailSuggestion={last_email_suggestion:"",email_field:void 0,email_suggestion_field:void 0,default_domains:["gmail.com","yahoo.com","hotmail.com","aol.com","comcast.net","msn.com","sbcglobal.net","verizon.net","att.net","bellsouth.net","cox.net","earthlink.net","live.com","mac.com","charter.net","me.com","ymail.com","optonline.net","juno.com","excite.com","netscape.net","pacbell.net"],init:function(e){e=e||{};var t=e.string||'<div class="blurb moveon-bright-red bump-bottom-1"> Did you mean <strong><span style="cursor:pointer;"onclick="EmailSuggestion.ok()">{{email}}</span></strong>?  <a onclick="EmailSuggestion.ok()">Yes!</a> / <a onclick="EmailSuggestion.nevermind()">No</a> </div>',i=e.domains||this.default_domains;if(e.email_id?this.email_field=$("#"+e.email_id):e.email_selector?this.email_field=$(e.email_selector):this.email_field=$('input[name="email"]'),!this.email_field.length)throw new Error("Unable to find email field in setup_email_suggestion - please pass in email_id or email_selector.");e.email_suggestion_id?this.email_suggestion_field=$("#"+e.email_suggestion_id):e.email_suggestion_selector&&(this.email_suggestion_field=$(e.email_suggestion_selector)),e.validation_error_class&&(this.validation_error_class=e.validation_error_class),this.email_suggestion_field&&this.email_suggestion_field.length||(this.email_field.after('<span id="auto_email_suggestion" class="email_suggestion hidden"></span>'),this.email_suggestion_field=$("#auto_email_suggestion")),this.email_field.keypress(function(){/.*@.*\.\w+/.test($(this).val())?EmailSuggestion.coloroff():EmailSuggestion.coloron()}),this.email_field.blur(function(){$(this).mailcheck({domains:i,suggested:function(e,i){EmailSuggestion.last_email_suggestion=i,EmailSuggestion.email_suggestion_field.html(t.replace("{{email}}",i.full)).show().css("visibility","visible"),EmailSuggestion.coloron()},empty:function(e){EmailSuggestion.email_suggestion_field.html("")}})})},ok:function(){this.email_field.val(this.last_email_suggestion.full),this.email_suggestion_field.html(""),this.coloroff()},nevermind:function(){this.email_suggestion_field.html(""),this.coloroff()},coloron:function(){this.validation_error_class?this.email_field.addClass(this.validation_error_class):this.email_field.attr("style","color:#c22326;")},coloroff:function(){this.validation_error_class?this.email_field.removeClass(this.validation_error_class):this.email_field.attr("style","color:#555555;")}};window.jsErrors=[],window.onerror=function(e){window.jsErrors[window.jsErrors.length]=e},$(document).ready(function(){$(".if-js").show(),$("a[data-confirm-message]").click(confirmSubmit),$("input.toggle-all").click(toggleAll),$(".event-roster td:not(.toggle-col)").click(toggleRow),$('input[type="submit"].email').click(showEmailForm),$('input[type="submit"]').click(setFormAction),$(".jump-link").click(handleJumpLink),$("input.toggle").click(handleListChanged),$(".add-more-link").shorten({moreText:"see more",lessText:""}),$(function(){$('[data-toggle="tooltip"]').tooltip()}),updateConfirmationMessage()}),$(document).ready(function(){$("form").each(function(){var e=this;if(!(null==location.search||location.search.length<1))for(var t=location.search.substring(1).split("&"),i=0;i<t.length;++i){var n=t[i].split("="),a=n[0],o=unescape(n[1].replace(/\+/g," ")),r=e.elements[a],s=null,l=!1;switch(null!=r&&(null!=r.length&&r.length>=1&&null!=r[0].type&&void 0!=r[0].type?(s=r[0].type,l=!0):s=r.type),s){case"text":case"hidden":case"textarea":l&&(r=r[0]),r.value=o,$(r).trigger("change");break;case"select-one":case"select-multiple":l&&(r=r[0]);for(var c=0;c<r.options.length;++c){var u=r.options[c],m=u.value;if(null!=m&&""!=m||(m=u.text),m==o){u.selected=!0,$(r).trigger("change");break}}break;case"checkbox":case"radio":if(l){for(var d=0;d<r.length;++d)if(r[d].value==o){r[d].checked=!0,$(r).trigger("change");break}}else r.checked=!0}}})}),function(e){e.fn.mailcheck=function(e,t){var i=["yahoo.com","google.com","hotmail.com","gmail.com","me.com","aol.com","mac.com","live.com","comcast.net","googlemail.com","msn.com","hotmail.co.uk","yahoo.co.uk","facebook.com","verizon.net","sbcglobal.net","att.net","gmx.com","mail.com"];if("object"==typeof e&&void 0===t)e.domains=e.domains||i;else{var n=e;e=t,e.domains=n||i}var a=Kicksend.mailcheck.suggest(encodeURI(this.val()),e.domains);a?e.suggested&&e.suggested(this,a):e.empty&&e.empty(this)}}(jQuery);var Kicksend={mailcheck:{threshold:3,suggest:function(e,t){e=e.toLowerCase();var i=this.splitEmail(e),n=this.findClosestDomain(i.domain,t);return!!n&&{address:i.address,domain:n,full:i.address+"@"+n}},findClosestDomain:function(e,t){for(var i,n=99,a=null,o=0;o<t.length;o++){if(e===t[o])return!1;i=this.stringDistance(e,t[o]),i<n&&(n=i,a=t[o])}return n<=this.threshold&&null!==a&&a},stringDistance:function(e,t){if(null==e||0===e.length)return null==t||0===t.length?0:t.length;if(null==t||0===t.length)return e.length;for(var i=0,n=0,a=0,o=0,r=5;i+n<e.length&&i+a<t.length;){if(e.charAt(i+n)==t.charAt(i+a))o++;else{n=0,a=0;for(var s=0;s<r;s++){if(i+s<e.length&&e.charAt(i+s)==t.charAt(i)){n=s;break}if(i+s<t.length&&e.charAt(i)==t.charAt(i+s)){a=s;break}}}i++}return(e.length+t.length)/2-o},splitEmail:function(e){var t=e.split("@");if(t.length<2)return!1;for(var i=0;i<t.length;i++)if(""===t[i])return!1;return{domain:t.pop(),address:t.join("@")}}}};!function(e){e.fn.shorten=function(t){"use strict";var i={showChars:100,minHideChars:10,ellipsesText:"...",moreText:"more",lessText:"less",onLess:function(){},onMore:function(){},errMsg:null,force:!1};return t&&e.extend(i,t),!(e(this).data("jquery.shorten")&&!i.force)&&(e(this).data("jquery.shorten",!0),e(document).off("click",".morelink"),e(document).on({click:function(){var t=e(this);return t.hasClass("less")?(t.removeClass("less"),t.html(i.moreText),t.parent().prev().animate({height:"0%"},function(){t.parent().prev().prev().show()}).hide("fast",function(){i.onLess()})):(t.addClass("less"),t.html(i.lessText),t.parent().prev().animate({height:"100%"},function(){t.parent().prev().prev().hide()}).show("fast",function(){i.onMore()})),!1}},".morelink"),this.each(function(){var t=e(this),n=t.html(),a=t.text().length;if(a>i.showChars+i.minHideChars){var o=n.substr(0,i.showChars);if(o.indexOf("<")>=0){for(var r=!1,s="",l=0,c=[],u=null,m=0,d=0;d<=i.showChars;m++)if("<"!=n[m]||r||(r=!0,u=n.substring(m+1,n.indexOf(">",m)),"/"==u[0]?u!="/"+c[0]?i.errMsg="ERROR en HTML: the top of the stack should be the tag that closes":c.shift():"br"!=u.toLowerCase()&&c.unshift(u)),r&&">"==n[m]&&(r=!1),r)s+=n.charAt(m);else if(d++,l<=i.showChars)s+=n.charAt(m),l++;else if(c.length>0){for(j=0;j<c.length;j++)s+="</"+c[j]+">";break}o=e("<div/>").html(s+'<span class="ellip">'+i.ellipsesText+"</span>").html()}else o+=i.ellipsesText;var f='<div class="shortcontent">'+o+'</div><div class="allcontent">'+n+'</div><span><a href="javascript://nop/" class="morelink">'+i.moreText+"</a></span>";t.html(f),t.find(".allcontent").hide(),e(".shortcontent p:last",t).css("margin-bottom",0)}}))}}(jQuery),function(e){"object"==typeof exports&&exports&&"object"==typeof module&&module&&module.exports===exports?e(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){function t(e){var t=e[0];return t.offsetWidth>0&&t.offsetHeight>0}function i(t){if(t.minTime&&(t.minTime=b(t.minTime)),t.maxTime&&(t.maxTime=b(t.maxTime)),t.durationTime&&"function"!=typeof t.durationTime&&(t.durationTime=b(t.durationTime)),"now"==t.scrollDefault)t.scrollDefault=function(){return t.roundingFunction(b(new Date),t)};else if(t.scrollDefault&&"function"!=typeof t.scrollDefault){var i=t.scrollDefault;t.scrollDefault=function(){return t.roundingFunction(b(i),t)}}else t.minTime&&(t.scrollDefault=function(){return t.roundingFunction(t.minTime,t)});if("string"===e.type(t.timeFormat)&&t.timeFormat.match(/[gh]/)&&(t._twelveHourTime=!0),t.showOnFocus===!1&&t.showOn.indexOf("focus")!=-1&&t.showOn.splice(t.showOn.indexOf("focus"),1),t.disableTimeRanges.length>0){for(var n in t.disableTimeRanges)t.disableTimeRanges[n]=[b(t.disableTimeRanges[n][0]),b(t.disableTimeRanges[n][1])];t.disableTimeRanges=t.disableTimeRanges.sort(function(e,t){return e[0]-t[0]});for(var n=t.disableTimeRanges.length-1;n>0;n--)t.disableTimeRanges[n][0]<=t.disableTimeRanges[n-1][1]&&(t.disableTimeRanges[n-1]=[Math.min(t.disableTimeRanges[n][0],t.disableTimeRanges[n-1][0]),Math.max(t.disableTimeRanges[n][1],t.disableTimeRanges[n-1][1])],t.disableTimeRanges.splice(n,1))}return t}function n(t){var i=t.data("timepicker-settings"),n=t.data("timepicker-list");if(n&&n.length&&(n.remove(),t.data("timepicker-list",!1)),i.useSelect){n=e("<select />",{"class":"ui-timepicker-select"});var r=n}else{n=e("<ul />",{"class":"ui-timepicker-list"});var r=e("<div />",{"class":"ui-timepicker-wrapper",tabindex:-1});r.css({display:"none",position:"absolute"}).append(n)}if(i.noneOption)if(i.noneOption===!0&&(i.noneOption=i.useSelect?"Time...":"None"),e.isArray(i.noneOption)){for(var l in i.noneOption)if(parseInt(l,10)==l){var u=a(i.noneOption[l],i.useSelect);n.append(u)}}else{var u=a(i.noneOption,i.useSelect);n.append(u)}if(i.className&&r.addClass(i.className),(null!==i.minTime||null!==i.durationTime)&&i.showDuration){"function"==typeof i.step?"function":i.step;r.addClass("ui-timepicker-with-duration"),r.addClass("ui-timepicker-step-"+i.step)}var m=i.minTime;"function"==typeof i.durationTime?m=b(i.durationTime()):null!==i.durationTime&&(m=i.durationTime);var f=null!==i.minTime?i.minTime:0,p=null!==i.maxTime?i.maxTime:f+_-1;p<f&&(p+=_),p===_-1&&"string"===e.type(i.timeFormat)&&i.show2400&&(p=_);var h=i.disableTimeRanges,y=0,w=h.length,$=i.step;"function"!=typeof $&&($=function(){return i.step});for(var l=f,x=0;l<=p;x++,l+=60*$(x)){var C=l,S=k(C,i);if(i.useSelect){var D=e("<option />",{value:S});D.text(S)}else{var D=e("<li />");D.addClass(C%86400<43200?"ui-timepicker-am":"ui-timepicker-pm"),D.data("time",C<=86400?C:C%86400),D.text(S)}if((null!==i.minTime||null!==i.durationTime)&&i.showDuration){var M=v(l-m,i.step);if(i.useSelect)D.text(D.text()+" ("+M+")");else{var R=e("<span />",{"class":"ui-timepicker-duration"});R.text(" ("+M+")"),D.append(R)}}y<w&&(C>=h[y][1]&&(y+=1),h[y]&&C>=h[y][0]&&C<h[y][1]&&(i.useSelect?D.prop("disabled",!0):D.addClass("ui-timepicker-disabled"))),n.append(D)}if(r.data("timepicker-input",t),t.data("timepicker-list",r),i.useSelect)t.val()&&n.val(o(b(t.val()),i)),n.on("focus",function(){e(this).data("timepicker-input").trigger("showTimepicker")}),n.on("blur",function(){e(this).data("timepicker-input").trigger("hideTimepicker")}),n.on("change",function(){d(t,e(this).val(),"select")}),d(t,n.val(),"initial"),t.hide().after(n);else{var j=i.appendTo;"string"==typeof j?j=e(j):"function"==typeof j&&(j=j(t)),j.append(r),c(t,n),n.on("mousedown touchstart","li",function(i){t.off("focus.timepicker"),t.on("focus.timepicker-ie-hack",function(){t.off("focus.timepicker-ie-hack"),t.on("focus.timepicker",T.show)}),s(t)||t[0].focus(),n.find("li").removeClass("ui-timepicker-selected"),e(this).addClass("ui-timepicker-selected"),g(t)&&(t.trigger("hideTimepicker"),n.on("mouseup.timepicker touchend.timepicker","li",function(e){n.off("mouseup.timepicker touchend.timepicker"),r.hide()}))})}}function a(t,i){var n,a,o;return"object"==typeof t?(n=t.label,a=t.className,o=t.value):"string"==typeof t?n=t:e.error("Invalid noneOption value"),i?e("<option />",{value:o,"class":a,text:n}):e("<li />",{"class":a,text:n}).data("time",String(o))}function o(e,t){if(e=t.roundingFunction(e,t),null!==e)return k(e,t)}function r(t){var i=e(t.target),n=i.closest(".ui-timepicker-input");0===n.length&&0===i.closest(".ui-timepicker-wrapper").length&&(T.hide(),e(document).unbind(".ui-timepicker"),e(window).unbind(".ui-timepicker"))}function s(e){var t=e.data("timepicker-settings");return(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&t.disableTouchKeyboard}function l(t,i,n){if(!n&&0!==n)return!1;var a=t.data("timepicker-settings"),o=!1,n=a.roundingFunction(n,a);return i.find("li").each(function(t,i){var a=e(i);if("number"==typeof a.data("time"))return a.data("time")==n?(o=a,!1):void 0}),o}function c(e,t){t.find("li").removeClass("ui-timepicker-selected");var i=b(m(e),e.data("timepicker-settings"));if(null!==i){var n=l(e,t,i);if(n){var a=n.offset().top-t.offset().top;(a+n.outerHeight()>t.outerHeight()||a<0)&&t.scrollTop(t.scrollTop()+n.position().top-n.outerHeight()),n.addClass("ui-timepicker-selected")}}}function u(t,i){if(""!==this.value&&"timepicker"!=i){var n=e(this);if(!n.is(":focus")||t&&"change"==t.type){var a=n.data("timepicker-settings"),o=b(this.value,a);if(null===o)return void n.trigger("timeFormatError");var r=!1;null!==a.minTime&&o<a.minTime&&null!==a.maxTime&&o>a.maxTime&&(r=!0),e.each(a.disableTimeRanges,function(){if(o>=this[0]&&o<this[1])return r=!0,!1}),a.forceRoundTime&&(o=a.roundingFunction(o,a));var s=k(o,a);r?d(n,s,"error")&&n.trigger("timeRangeError"):d(n,s)}}}function m(e){return e.is("input")?e.val():e.data("ui-timepicker-value")}function d(e,t,i){if(e.is("input")){e.val(t);var n=e.data("timepicker-settings");n.useSelect&&"select"!=i&&"initial"!=i&&e.data("timepicker-list").val(o(b(t),n))}return e.data("ui-timepicker-value")!=t?(e.data("ui-timepicker-value",t),"select"==i?e.trigger("selectTime").trigger("changeTime").trigger("change","timepicker"):"error"!=i&&e.trigger("changeTime"),!0):(e.trigger("selectTime"),!1)}function f(e){switch(e.keyCode){case 13:case 9:return;default:e.preventDefault()}}function p(i){var n=e(this),a=n.data("timepicker-list");if(!a||!t(a)){if(40!=i.keyCode)return!0;T.show.call(n.get(0)),a=n.data("timepicker-list"),s(n)||n.focus()}switch(i.keyCode){case 13:return g(n)&&T.hide.apply(this),i.preventDefault(),!1;case 38:var o=a.find(".ui-timepicker-selected");return o.length?o.is(":first-child")||(o.removeClass("ui-timepicker-selected"),o.prev().addClass("ui-timepicker-selected"),o.prev().position().top<o.outerHeight()&&a.scrollTop(a.scrollTop()-o.outerHeight())):(a.find("li").each(function(t,i){if(e(i).position().top>0)return o=e(i),!1}),o.addClass("ui-timepicker-selected")),!1;case 40:return o=a.find(".ui-timepicker-selected"),0===o.length?(a.find("li").each(function(t,i){if(e(i).position().top>0)return o=e(i),!1}),o.addClass("ui-timepicker-selected")):o.is(":last-child")||(o.removeClass("ui-timepicker-selected"),o.next().addClass("ui-timepicker-selected"),o.next().position().top+2*o.outerHeight()>a.outerHeight()&&a.scrollTop(a.scrollTop()+o.outerHeight())),!1;case 27:a.find("li").removeClass("ui-timepicker-selected"),T.hide();break;case 9:T.hide();break;default:return!0}}function h(i){var n=e(this),a=n.data("timepicker-list"),o=n.data("timepicker-settings");if(!a||!t(a)||o.disableTextInput)return!0;switch(i.keyCode){case 96:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 65:case 77:case 80:case 186:case 8:case 46:o.typeaheadHighlight?c(n,a):a.hide()}}function g(e){var t=e.data("timepicker-settings"),i=e.data("timepicker-list"),n=null,a=i.find(".ui-timepicker-selected");return!a.hasClass("ui-timepicker-disabled")&&(a.length&&(n=a.data("time")),null!==n&&("string"!=typeof n&&(n=k(n,t)),d(e,n,"select")),!0)}function v(e,t){e=Math.abs(e);var i,n,a=Math.round(e/60),o=[];return a<60?o=[a,y.mins]:(i=Math.floor(a/60),n=a%60,30==t&&30==n&&(i+=y.decimal+5),o.push(i),o.push(1==i?y.hr:y.hrs),30!=t&&n&&(o.push(n),o.push(y.mins))),o.join(" ")}function k(t,i){if("number"!=typeof t)return null;var n=parseInt(t%60),a=parseInt(t/60%60),o=parseInt(t/3600%24),r=new Date(1970,0,2,o,a,n,0);if(isNaN(r.getTime()))return null;if("function"===e.type(i.timeFormat))return i.timeFormat(r);for(var s,l,c="",u=0;u<i.timeFormat.length;u++)switch(l=i.timeFormat.charAt(u)){case"a":c+=r.getHours()>11?y.pm:y.am;break;case"A":c+=r.getHours()>11?y.PM:y.AM;break;case"g":s=r.getHours()%12,c+=0===s?"12":s;break;case"G":s=r.getHours(),t===_&&(s=i.show2400?24:0),c+=s;break;case"h":s=r.getHours()%12,0!==s&&s<10&&(s="0"+s),c+=0===s?"12":s;break;case"H":s=r.getHours(),t===_&&(s=i.show2400?24:0),c+=s>9?s:"0"+s;break;case"i":var a=r.getMinutes();c+=a>9?a:"0"+a;break;case"s":n=r.getSeconds(),c+=n>9?n:"0"+n;break;case"\\":u++,c+=i.timeFormat.charAt(u);break;default:c+=l}return c}function b(e,t){if(""===e||null===e)return null;if("object"==typeof e)return 3600*e.getHours()+60*e.getMinutes()+e.getSeconds();if("string"!=typeof e)return e;e=e.toLowerCase().replace(/[\s\.]/g,""),"a"!=e.slice(-1)&&"p"!=e.slice(-1)||(e+="m");var i="("+y.am.replace(".","")+"|"+y.pm.replace(".","")+"|"+y.AM.replace(".","")+"|"+y.PM.replace(".","")+")?",n=new RegExp("^"+i+"([0-9]?[0-9])\\W?([0-5][0-9])?\\W?([0-5][0-9])?"+i+"$"),a=e.match(n);if(!a)return null;var o=parseInt(1*a[2],10),r=o>24?o%24:o,s=a[1]||a[5],l=r;if(r<=12&&s){var c=s==y.pm||s==y.PM;l=12==r?c?12:0:r+(c?12:0)}var u=1*a[3]||0,m=1*a[4]||0,d=3600*l+60*u+m;if(r<12&&!s&&t&&t._twelveHourTime&&t.scrollDefault){var f=d-t.scrollDefault();f<0&&f>=_/-2&&(d=(d+_/2)%_)}return d}var _=86400,y={am:"am",pm:"pm",AM:"AM",PM:"PM",decimal:".",mins:"mins",hr:"hr",hrs:"hrs"},T={init:function(t){return this.each(function(){var a=e(this),o=[];for(var r in e.fn.timepicker.defaults)a.data(r)&&(o[r]=a.data(r));var s=e.extend({},e.fn.timepicker.defaults,o,t);if(s.lang&&(y=e.extend(y,s.lang)),s=i(s),a.data("timepicker-settings",s),a.addClass("ui-timepicker-input"),s.useSelect)n(a);else{if(a.prop("autocomplete","off"),s.showOn)for(var l in s.showOn)a.on(s.showOn[l]+".timepicker",T.show);a.on("change.timepicker",u),a.on("keydown.timepicker",p),a.on("keyup.timepicker",h),s.disableTextInput&&a.on("keydown.timepicker",f),s.disableInitFormat&&u.call(a.get(0))}})},show:function(i){var a=e(this),o=a.data("timepicker-settings");if(i&&i.preventDefault(),o.useSelect)return void a.data("timepicker-list").focus();s(a)&&a.blur();var u=a.data("timepicker-list");if(!a.prop("readonly")&&(u&&0!==u.length&&"function"!=typeof o.durationTime||(n(a),u=a.data("timepicker-list")),!t(u))){a.data("ui-timepicker-value",a.val()),c(a,u),T.hide(),u.show();var d={};o.orientation.match(/r/)?d.left=a.offset().left+a.outerWidth()-u.outerWidth()+parseInt(u.css("marginLeft").replace("px",""),10):d.left=a.offset().left+parseInt(u.css("marginLeft").replace("px",""),10);var f;f=o.orientation.match(/t/)?"t":o.orientation.match(/b/)?"b":a.offset().top+a.outerHeight(!0)+u.outerHeight()>e(window).height()+e(window).scrollTop()?"t":"b","t"==f?(u.addClass("ui-timepicker-positioned-top"),d.top=a.offset().top-u.outerHeight()+parseInt(u.css("marginTop").replace("px",""),10)):(u.removeClass("ui-timepicker-positioned-top"),d.top=a.offset().top+a.outerHeight()+parseInt(u.css("marginTop").replace("px",""),10)),u.offset(d);var p=u.find(".ui-timepicker-selected");if(!p.length){var h=b(m(a));null!==h?p=l(a,u,h):o.scrollDefault&&(p=l(a,u,o.scrollDefault()))}if(p&&p.length){var g=u.scrollTop()+p.position().top-p.outerHeight();u.scrollTop(g)}else u.scrollTop(0);return o.stopScrollPropagation&&e(document).on("wheel.ui-timepicker",".ui-timepicker-wrapper",function(t){t.preventDefault();var i=e(this).scrollTop();e(this).scrollTop(i+t.originalEvent.deltaY)}),e(document).on("touchstart.ui-timepicker mousedown.ui-timepicker",r),e(window).on("resize.ui-timepicker",r),o.closeOnWindowScroll&&e(document).on("scroll.ui-timepicker",r),a.trigger("showTimepicker"),this}},hide:function(i){var n=e(this),a=n.data("timepicker-settings");return a&&a.useSelect&&n.blur(),e(".ui-timepicker-wrapper").each(function(){var i=e(this);if(t(i)){var n=i.data("timepicker-input"),a=n.data("timepicker-settings");a&&a.selectOnBlur&&g(n),i.hide(),n.trigger("hideTimepicker")}}),this},option:function(t,a){return"string"==typeof t&&"undefined"==typeof a?e(this).data("timepicker-settings")[t]:this.each(function(){var o=e(this),r=o.data("timepicker-settings"),s=o.data("timepicker-list");"object"==typeof t?r=e.extend(r,t):"string"==typeof t&&(r[t]=a),r=i(r),o.data("timepicker-settings",r),s&&(s.remove(),o.data("timepicker-list",!1)),r.useSelect&&n(o)})},getSecondsFromMidnight:function(){return b(m(this))},getTime:function(e){var t=this,i=m(t);if(!i)return null;var n=b(i);if(null===n)return null;e||(e=new Date);var a=new Date(e);return a.setHours(n/3600),a.setMinutes(n%3600/60),a.setSeconds(n%60),a.setMilliseconds(0),a},isVisible:function(){var e=this,i=e.data("timepicker-list");return!(!i||!t(i))},setTime:function(e){var t=this,i=t.data("timepicker-settings");if(i.forceRoundTime)var n=o(b(e),i);else var n=k(b(e),i);return e&&null===n&&i.noneOption&&(n=e),d(t,n),t.data("timepicker-list")&&c(t,t.data("timepicker-list")),this},remove:function(){var e=this;if(e.hasClass("ui-timepicker-input")){var t=e.data("timepicker-settings");return e.removeAttr("autocomplete","off"),e.removeClass("ui-timepicker-input"),e.removeData("timepicker-settings"),e.off(".timepicker"),e.data("timepicker-list")&&e.data("timepicker-list").remove(),t.useSelect&&e.show(),e.removeData("timepicker-list"),this}}};e.fn.timepicker=function(t){return this.length?T[t]?this.hasClass("ui-timepicker-input")?T[t].apply(this,Array.prototype.slice.call(arguments,1)):this:"object"!=typeof t&&t?void e.error("Method "+t+" does not exist on jQuery.timepicker"):T.init.apply(this,arguments):this},e.fn.timepicker.defaults={appendTo:"body",className:null,closeOnWindowScroll:!1,disableTextInput:!1,disableTimeRanges:[],disableTouchKeyboard:!1,disableInitFormat:!1,durationTime:null,forceRoundTime:!1,maxTime:null,minTime:null,noneOption:!1,orientation:"l",roundingFunction:function(e,t){if(null===e)return null;if("number"!=typeof t.step)return e;var i=e%(60*t.step);return i>=30*t.step?e+=60*t.step-i:e-=i,e==_&&t.show2400?e:e%_},scrollDefault:null,selectOnBlur:!1,show2400:!1,showDuration:!1,showOn:["click","focus"],showOnFocus:!0,step:30,stopScrollPropagation:!1,timeFormat:"g:ia",typeaheadHighlight:!0,useSelect:!1}});var SMS_SUBSCRIBE_DIV="#id_subscribe_sms";!function(){var e=$(SMS_SUBSCRIBE_DIV).attr("data-phonemobile")||"";/opt-out-email-/.test(e)&&(/opt-out-email-hidden/.test(e)&&($("#id_email_box").hide(),$("#id_sms_subscribed").change(function(){this.checked||$("#id_email_box").show()})),window.actionkit.form.email=!1)}();var mobilePhoneUpdate=function(){if($(this).val().replace(/\D/g,"").length>=10){var e=$(SMS_SUBSCRIBE_DIV).attr("data-phonemobile")||"";/opt-out/.test(e)&&($("#id_sms_subscribed").prop("checked",!0),$("#id_sms_subscribed").val("sms_subscribed")),$(SMS_SUBSCRIBE_DIV).show()}};$("input[name=phone],input[name=mobile_phone]").on("change unfocus",mobilePhoneUpdate).each(mobilePhoneUpdate),$("form[name=act]").on("actionkitbeforevalidation",function(){window.console&&console.log("actionkitbefore validation! (mobile check)");var e=$("input[name=phone],input[name=mobile_phone]").val().replace(/\D/g,""),t=$("#id_sms_subscribed",SMS_SUBSCRIBE_DIV).prop("checked");t&&e&&e.length>=10&&(window.console&&console.log("in mobile pathway, before validation"),""===$("#id_email").val()&&($("#id_suppress_subscribe").val("1"),$("#id_email").val(e+"-smssubscriber@example.com"),$("#id_email_box").hide()),$("#id_sms_subscribed").val("sms_subscribed"),$("#id_sms_termsandconditions").val("sms_termsandconditions"),$("#id_robodial_termsandconditions").val("yes"))}),$(document).ready(shuffleQuestions),$(document).ready(function(){var e=$('<div class="col-md-8 checkbox"></div>'),t=$('<input type="checkbox" name="retired" />').click(function(){var e=$(this),t=$("#employer-occupation-info");e.is(":checked")?(t.addClass("hidden"),t.find("#action_employer").val("None"),t.find("#action_occupation").val("Not employed")):t.removeClass("hidden")}),i=$('<label for="retired"> </label>'),n=$("<span>I am retired or unemployed</span>").click(function(){$("input[name=retired]").click()});i.prepend(t).append(n),e.append(i),$("#retired-checkbox").append(e)}),$(document).ready(function(){$("#card_num").length>0&&$("#card_num").validateCreditCard(function(e){$("#card_num_box .cc-icons .wf-icon").removeClass("matched"),e.valid&&$("#card_num_box .cc-icons .icon-"+e.card_type.name).addClass("matched"),e.valid||0==$("#card_num").val().length?$("#card_num_box").removeClass("has-error"):$("#card_num_box").addClass("has-error")})});