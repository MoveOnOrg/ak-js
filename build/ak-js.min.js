function confirmLargeDonation(e){return!!$("form").data("confirmed")||($("#confirm-big-donation .donation-amount").text(e),$("#confirm-big-donation .btn.yes").click(function(){$("#confirm-big-donation").on("hidden.bs.modal",function(e){$("form").data("confirmed",!0).trigger("submit")}),$("#confirm-big-donation").modal("hide")}),$("#confirm-big-donation").modal(),!1)}function toggleAll(){$(this).closest("form").find("input.toggle").attr("checked",this.checked)}function handleListChanged(){var e=$(this).closest("form"),i=$("input.toggle:checked").length;0==i?i=$("input.toggle").length:e.find(".check-recipients-help").hide(),e.find(".to-count").text(i)}function showEmailForm(){var e=$(this).closest("form");return e.find(".roster-controls").slideUp("fast"),e.find(".contact-form").slideDown("fast"),!1}function handleJumpLink(){var e;if("email-cohosts-link"==this.id?e=$(".contact-cohosts"):"email-attendees-link"==this.id?e=$(".contact-attendees"):"invite-friends-link"==this.id&&(e=$("#taf")),/^email-/.test(this.id)){var i=e.closest("form").find('input[type="submit"].email');showEmailForm.apply(i,[])}return e.addClass("target"),!0}function confirmSubmit(){return confirm($(this).attr("data-confirm-message"))}function setFormAction(){var e=$(this).closest("form")[0];(e||e.action)&&(e.action.value=this.name)}function validateRoster(e){var i=e.action.value;/(change-role|remove)/.test(i)&&!$(e).find("input.toggle:checked").length&&(actionkit.errors["user_id:missing"]=actionkit.forms.errorMessage("event_roster_user_ids:missing")),"send_email"!=i||e.body.value||(actionkit.errors["body:missing"]=actionkit.forms.errorMessage("event_contact_body:missing"))}function confirmRoster(e){var i=e.action.value,t=$(e).find('input[name="'+i+'"]'),n=t.attr("confirm-message");return!n||confirm(n)}function toggleRow(e){var i=$(this).closest("tr").find(".toggle")[0];return i&&(i.checked=!i.checked),!1}function updateConfirmationMessage(){for(var e in actionkit.args)e.indexOf(":")>0&&1==actionkit.args[e]&&($("#ak-confirmation").text(actionkit.forms.text["error_"+e]),$("#ak-confirmation").show())}function shuffle(e){for(var i,t,n=e.length;0!==n;)t=Math.floor(Math.random()*n),n-=1,i=e[n],e[n]=e[t],e[t]=i;return e}function shuffleQuestions(){$(".randomized-options").each(function(){var e=$(this),i=[];e.find(".option").each(function(){var e=$(this);i.push(e.clone()),e.remove()}),shuffle(i),$.each(i,function(){e.append($(this))})})}(function(){var e,i=[].indexOf||function(e){for(var i=0,t=this.length;i<t;i++)if(i in this&&this[i]===e)return i;return-1};e=jQuery,e.fn.validateCreditCard=function(t,n){var a,o,r,s,l,c,u,m,d,f,p,h,g;for(s=[{name:"amex",pattern:/^3[47]/,valid_length:[15]},{name:"diners_club_carte_blanche",pattern:/^30[0-5]/,valid_length:[14]},{name:"diners_club_international",pattern:/^36/,valid_length:[14]},{name:"jcb",pattern:/^35(2[89]|[3-8][0-9])/,valid_length:[16]},{name:"laser",pattern:/^(6304|670[69]|6771)/,valid_length:[16,17,18,19]},{name:"visa_electron",pattern:/^(4026|417500|4508|4844|491(3|7))/,valid_length:[16]},{name:"visa",pattern:/^4/,valid_length:[16]},{name:"mastercard",pattern:/^5[1-5]/,valid_length:[16]},{name:"maestro",pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,valid_length:[12,13,14,15,16,17,18,19]},{name:"discover",pattern:/^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)/,valid_length:[16]}],a=!1,t&&("object"==typeof t?(n=t,a=!1,t=null):"function"==typeof t&&(a=!0)),null==n&&(n={}),null==n.accept&&(n.accept=function(){var e,i,t;for(t=[],e=0,i=s.length;e<i;e++)o=s[e],t.push(o.name);return t}()),g=n.accept,p=0,h=g.length;p<h;p++)if(r=g[p],i.call(function(){var e,i,t;for(t=[],e=0,i=s.length;e<i;e++)o=s[e],t.push(o.name);return t}(),r)<0)throw"Credit card type '"+r+"' is not supported";return l=function(e){var t,a,l;for(l=function(){var e,t,a,r;for(r=[],e=0,t=s.length;e<t;e++)o=s[e],a=o.name,i.call(n.accept,a)>=0&&r.push(o);return r}(),t=0,a=l.length;t<a;t++)if(r=l[t],e.match(r.pattern))return r;return null},u=function(e){var i,t,n,a,o,r;for(n=0,r=e.split("").reverse(),t=a=0,o=r.length;a<o;t=++a)i=r[t],i=+i,t%2?(i*=2,n+=i<10?i:i-9):n+=i;return n%10===0},c=function(e,t){var n;return n=e.length,i.call(t.valid_length,n)>=0},f=function(e){return function(e){var i,t;return r=l(e),t=!1,i=!1,null!=r&&(t=u(e),i=c(e,r)),{card_type:r,valid:t&&i,luhn_valid:t,length_valid:i}}}(this),d=function(i){return function(){var t;return t=m(e(i).val()),f(t)}}(this),m=function(e){return e.replace(/[ -]/g,"")},a?(this.on("input.jccv",function(i){return function(){return e(i).off("keyup.jccv"),t.call(i,d())}}(this)),this.on("keyup.jccv",function(e){return function(){return t.call(e,d())}}(this)),t.call(this,d()),this):d()}}).call(this),$(document).ready(function(){$("form").data("confirmed",!1).submit(function(e){var i=$("#total-to-split"),t=0,n=$("input:radio[name=amount]:checked");t=n.length>0?parseFloat(n.val()):parseFloat($("#amount_other_field").val()),i.length>0&&(t=parseFloat(i.val())),t>=250&&(confirmLargeDonation(t)||e.preventDefault())}),$("form input").keyup(function(){$("form").data("confirmed",!1)})});var EmailSuggestion={last_email_suggestion:"",email_field:void 0,email_suggestion_field:void 0,default_domains:["gmail.com","yahoo.com","hotmail.com","aol.com","comcast.net","msn.com","sbcglobal.net","verizon.net","att.net","bellsouth.net","cox.net","earthlink.net","live.com","mac.com","charter.net","me.com","ymail.com","optonline.net","juno.com","excite.com","netscape.net","pacbell.net"],init:function(e){e=e||{};var i=e.string||'<div class="blurb moveon-bright-red bump-bottom-1"> Did you mean <strong><span style="cursor:pointer;"onclick="EmailSuggestion.ok()">{{email}}</span></strong>?  <a onclick="EmailSuggestion.ok()">Yes!</a> / <a onclick="EmailSuggestion.nevermind()">No</a> </div>',t=e.domains||this.default_domains;if(e.email_id?this.email_field=$("#"+e.email_id):e.email_selector?this.email_field=$(e.email_selector):this.email_field=$('input[name="email"]'),!this.email_field.length)throw new Error("Unable to find email field in setup_email_suggestion - please pass in email_id or email_selector.");e.email_suggestion_id?this.email_suggestion_field=$("#"+e.email_suggestion_id):e.email_suggestion_selector&&(this.email_suggestion_field=$(e.email_suggestion_selector)),e.validation_error_class&&(this.validation_error_class=e.validation_error_class),this.email_suggestion_field&&this.email_suggestion_field.length||(this.email_field.after('<span id="auto_email_suggestion" class="email_suggestion hidden"></span>'),this.email_suggestion_field=$("#auto_email_suggestion")),this.email_field.keypress(function(){/.*@.*\.\w+/.test($(this).val())?EmailSuggestion.coloroff():EmailSuggestion.coloron()}),this.email_field.blur(function(){$(this).mailcheck({domains:t,suggested:function(e,t){EmailSuggestion.last_email_suggestion=t,EmailSuggestion.email_suggestion_field.html(i.replace("{{email}}",t.full)).show().css("visibility","visible"),EmailSuggestion.coloron()},empty:function(e){EmailSuggestion.email_suggestion_field.html("")}})})},ok:function(){this.email_field.val(this.last_email_suggestion.full),this.email_suggestion_field.html(""),this.coloroff()},nevermind:function(){this.email_suggestion_field.html(""),this.coloroff()},coloron:function(){this.validation_error_class?this.email_field.addClass(this.validation_error_class):this.email_field.attr("style","color:#c22326;")},coloroff:function(){this.validation_error_class?this.email_field.removeClass(this.validation_error_class):this.email_field.attr("style","color:#555555;")}};window.jsErrors=[],window.onerror=function(e){window.jsErrors[window.jsErrors.length]=e},$(document).ready(function(){$(".if-js").show(),$("a[data-confirm-message]").click(confirmSubmit),$("input.toggle-all").click(toggleAll),$(".event-roster td:not(.toggle-col)").click(toggleRow),$('input[type="submit"].email').click(showEmailForm),$('input[type="submit"]').click(setFormAction),$(".jump-link").click(handleJumpLink),$("input.toggle").click(handleListChanged),$(".add-more-link").shorten({moreText:"see more",lessText:""}),$(function(){$('[data-toggle="tooltip"]').tooltip()}),updateConfirmationMessage()}),$(document).ready(function(){$("form").each(function(){var e=this;if(!(null==location.search||location.search.length<1))for(var i=location.search.substring(1).split("&"),t=0;t<i.length;++t){var n=i[t].split("="),a=n[0],o=unescape(n[1].replace(/\+/g," ")),r=e.elements[a],s=null,l=!1;switch(null!=r&&(null!=r.length&&r.length>=1&&null!=r[0].type&&void 0!=r[0].type?(s=r[0].type,l=!0):s=r.type),s){case"text":case"hidden":case"textarea":l&&(r=r[0]),r.value=o,$(r).trigger("change");break;case"select-one":case"select-multiple":l&&(r=r[0]);for(var c=0;c<r.options.length;++c){var u=r.options[c],m=u.value;if(null!=m&&""!=m||(m=u.text),m==o){u.selected=!0,$(r).trigger("change");break}}break;case"checkbox":case"radio":if(l){for(var d=0;d<r.length;++d)if(r[d].value==o){r[d].checked=!0,$(r).trigger("change");break}}else r.checked=!0}}})}),function(e){e.fn.mailcheck=function(e,i){var t=["yahoo.com","google.com","hotmail.com","gmail.com","me.com","aol.com","mac.com","live.com","comcast.net","googlemail.com","msn.com","hotmail.co.uk","yahoo.co.uk","facebook.com","verizon.net","sbcglobal.net","att.net","gmx.com","mail.com"];if("object"==typeof e&&void 0===i)e.domains=e.domains||t;else{var n=e;e=i,e.domains=n||t}var a=Kicksend.mailcheck.suggest(encodeURI(this.val()),e.domains);a?e.suggested&&e.suggested(this,a):e.empty&&e.empty(this)}}(jQuery);var Kicksend={mailcheck:{threshold:3,suggest:function(e,i){e=e.toLowerCase();var t=this.splitEmail(e),n=this.findClosestDomain(t.domain,i);return!!n&&{address:t.address,domain:n,full:t.address+"@"+n}},findClosestDomain:function(e,i){for(var t,n=99,a=null,o=0;o<i.length;o++){if(e===i[o])return!1;t=this.stringDistance(e,i[o]),t<n&&(n=t,a=i[o])}return n<=this.threshold&&null!==a&&a},stringDistance:function(e,i){if(null==e||0===e.length)return null==i||0===i.length?0:i.length;if(null==i||0===i.length)return e.length;for(var t=0,n=0,a=0,o=0,r=5;t+n<e.length&&t+a<i.length;){if(e.charAt(t+n)==i.charAt(t+a))o++;else{n=0,a=0;for(var s=0;s<r;s++){if(t+s<e.length&&e.charAt(t+s)==i.charAt(t)){n=s;break}if(t+s<i.length&&e.charAt(t)==i.charAt(t+s)){a=s;break}}}t++}return(e.length+i.length)/2-o},splitEmail:function(e){var i=e.split("@");if(i.length<2)return!1;for(var t=0;t<i.length;t++)if(""===i[t])return!1;return{domain:i.pop(),address:i.join("@")}}}};!function(e){e.fn.shorten=function(i){"use strict";var t={showChars:100,minHideChars:10,ellipsesText:"...",moreText:"more",lessText:"less",onLess:function(){},onMore:function(){},errMsg:null,force:!1};return i&&e.extend(t,i),!(e(this).data("jquery.shorten")&&!t.force)&&(e(this).data("jquery.shorten",!0),e(document).off("click",".morelink"),e(document).on({click:function(){var i=e(this);return i.hasClass("less")?(i.removeClass("less"),i.html(t.moreText),i.parent().prev().animate({height:"0%"},function(){i.parent().prev().prev().show()}).hide("fast",function(){t.onLess()})):(i.addClass("less"),i.html(t.lessText),i.parent().prev().animate({height:"100%"},function(){i.parent().prev().prev().hide()}).show("fast",function(){t.onMore()})),!1}},".morelink"),this.each(function(){var i=e(this),n=i.html(),a=i.text().length;if(a>t.showChars+t.minHideChars){var o=n.substr(0,t.showChars);if(o.indexOf("<")>=0){for(var r=!1,s="",l=0,c=[],u=null,m=0,d=0;d<=t.showChars;m++)if("<"!=n[m]||r||(r=!0,u=n.substring(m+1,n.indexOf(">",m)),"/"==u[0]?u!="/"+c[0]?t.errMsg="ERROR en HTML: the top of the stack should be the tag that closes":c.shift():"br"!=u.toLowerCase()&&c.unshift(u)),r&&">"==n[m]&&(r=!1),r)s+=n.charAt(m);else if(d++,l<=t.showChars)s+=n.charAt(m),l++;else if(c.length>0){for(j=0;j<c.length;j++)s+="</"+c[j]+">";break}o=e("<div/>").html(s+'<span class="ellip">'+t.ellipsesText+"</span>").html()}else o+=t.ellipsesText;var f='<div class="shortcontent">'+o+'</div><div class="allcontent">'+n+'</div><span><a href="javascript://nop/" class="morelink">'+t.moreText+"</a></span>";i.html(f),i.find(".allcontent").hide(),e(".shortcontent p:last",i).css("margin-bottom",0)}}))}}(jQuery),function(e){"object"==typeof exports&&exports&&"object"==typeof module&&module&&module.exports===exports?e(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){function i(e){var i=e[0];return i.offsetWidth>0&&i.offsetHeight>0}function t(i){if(i.minTime&&(i.minTime=_(i.minTime)),i.maxTime&&(i.maxTime=_(i.maxTime)),i.durationTime&&"function"!=typeof i.durationTime&&(i.durationTime=_(i.durationTime)),"now"==i.scrollDefault)i.scrollDefault=function(){return i.roundingFunction(_(new Date),i)};else if(i.scrollDefault&&"function"!=typeof i.scrollDefault){var t=i.scrollDefault;i.scrollDefault=function(){return i.roundingFunction(_(t),i)}}else i.minTime&&(i.scrollDefault=function(){return i.roundingFunction(i.minTime,i)});if("string"===e.type(i.timeFormat)&&i.timeFormat.match(/[gh]/)&&(i._twelveHourTime=!0),i.showOnFocus===!1&&i.showOn.indexOf("focus")!=-1&&i.showOn.splice(i.showOn.indexOf("focus"),1),i.disableTimeRanges.length>0){for(var n in i.disableTimeRanges)i.disableTimeRanges[n]=[_(i.disableTimeRanges[n][0]),_(i.disableTimeRanges[n][1])];i.disableTimeRanges=i.disableTimeRanges.sort(function(e,i){return e[0]-i[0]});for(var n=i.disableTimeRanges.length-1;n>0;n--)i.disableTimeRanges[n][0]<=i.disableTimeRanges[n-1][1]&&(i.disableTimeRanges[n-1]=[Math.min(i.disableTimeRanges[n][0],i.disableTimeRanges[n-1][0]),Math.max(i.disableTimeRanges[n][1],i.disableTimeRanges[n-1][1])],i.disableTimeRanges.splice(n,1))}return i}function n(i){var t=i.data("timepicker-settings"),n=i.data("timepicker-list");if(n&&n.length&&(n.remove(),i.data("timepicker-list",!1)),t.useSelect){n=e("<select />",{"class":"ui-timepicker-select"});var r=n}else{n=e("<ul />",{"class":"ui-timepicker-list"});var r=e("<div />",{"class":"ui-timepicker-wrapper",tabindex:-1});r.css({display:"none",position:"absolute"}).append(n)}if(t.noneOption)if(t.noneOption===!0&&(t.noneOption=t.useSelect?"Time...":"None"),e.isArray(t.noneOption)){for(var l in t.noneOption)if(parseInt(l,10)==l){var u=a(t.noneOption[l],t.useSelect);n.append(u)}}else{var u=a(t.noneOption,t.useSelect);n.append(u)}if(t.className&&r.addClass(t.className),(null!==t.minTime||null!==t.durationTime)&&t.showDuration){"function"==typeof t.step?"function":t.step;r.addClass("ui-timepicker-with-duration"),r.addClass("ui-timepicker-step-"+t.step)}var m=t.minTime;"function"==typeof t.durationTime?m=_(t.durationTime()):null!==t.durationTime&&(m=t.durationTime);var f=null!==t.minTime?t.minTime:0,p=null!==t.maxTime?t.maxTime:f+b-1;p<f&&(p+=b),p===b-1&&"string"===e.type(t.timeFormat)&&t.show2400&&(p=b);var h=t.disableTimeRanges,$=0,T=h.length,w=t.step;"function"!=typeof w&&(w=function(){return t.step});for(var l=f,x=0;l<=p;x++,l+=60*w(x)){var C=l,S=k(C,t);if(t.useSelect){var D=e("<option />",{value:S});D.text(S)}else{var D=e("<li />");D.addClass(C%86400<43200?"ui-timepicker-am":"ui-timepicker-pm"),D.data("time",C<=86400?C:C%86400),D.text(S)}if((null!==t.minTime||null!==t.durationTime)&&t.showDuration){var M=v(l-m,t.step);if(t.useSelect)D.text(D.text()+" ("+M+")");else{var R=e("<span />",{"class":"ui-timepicker-duration"});R.text(" ("+M+")"),D.append(R)}}$<T&&(C>=h[$][1]&&($+=1),h[$]&&C>=h[$][0]&&C<h[$][1]&&(t.useSelect?D.prop("disabled",!0):D.addClass("ui-timepicker-disabled"))),n.append(D)}if(r.data("timepicker-input",i),i.data("timepicker-list",r),t.useSelect)i.val()&&n.val(o(_(i.val()),t)),n.on("focus",function(){e(this).data("timepicker-input").trigger("showTimepicker")}),n.on("blur",function(){e(this).data("timepicker-input").trigger("hideTimepicker")}),n.on("change",function(){d(i,e(this).val(),"select")}),d(i,n.val(),"initial"),i.hide().after(n);else{var j=t.appendTo;"string"==typeof j?j=e(j):"function"==typeof j&&(j=j(i)),j.append(r),c(i,n),n.on("mousedown touchstart","li",function(t){i.off("focus.timepicker"),i.on("focus.timepicker-ie-hack",function(){i.off("focus.timepicker-ie-hack"),i.on("focus.timepicker",y.show)}),s(i)||i[0].focus(),n.find("li").removeClass("ui-timepicker-selected"),e(this).addClass("ui-timepicker-selected"),g(i)&&(i.trigger("hideTimepicker"),n.on("mouseup.timepicker touchend.timepicker","li",function(e){n.off("mouseup.timepicker touchend.timepicker"),r.hide()}))})}}function a(i,t){var n,a,o;return"object"==typeof i?(n=i.label,a=i.className,o=i.value):"string"==typeof i?n=i:e.error("Invalid noneOption value"),t?e("<option />",{value:o,"class":a,text:n}):e("<li />",{"class":a,text:n}).data("time",String(o))}function o(e,i){if(e=i.roundingFunction(e,i),null!==e)return k(e,i)}function r(i){var t=e(i.target),n=t.closest(".ui-timepicker-input");0===n.length&&0===t.closest(".ui-timepicker-wrapper").length&&(y.hide(),e(document).unbind(".ui-timepicker"),e(window).unbind(".ui-timepicker"))}function s(e){var i=e.data("timepicker-settings");return(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&i.disableTouchKeyboard}function l(i,t,n){if(!n&&0!==n)return!1;var a=i.data("timepicker-settings"),o=!1,n=a.roundingFunction(n,a);return t.find("li").each(function(i,t){var a=e(t);if("number"==typeof a.data("time"))return a.data("time")==n?(o=a,!1):void 0}),o}function c(e,i){i.find("li").removeClass("ui-timepicker-selected");var t=_(m(e),e.data("timepicker-settings"));if(null!==t){var n=l(e,i,t);if(n){var a=n.offset().top-i.offset().top;(a+n.outerHeight()>i.outerHeight()||a<0)&&i.scrollTop(i.scrollTop()+n.position().top-n.outerHeight()),n.addClass("ui-timepicker-selected")}}}function u(i,t){if(""!==this.value&&"timepicker"!=t){var n=e(this);if(!n.is(":focus")||i&&"change"==i.type){var a=n.data("timepicker-settings"),o=_(this.value,a);if(null===o)return void n.trigger("timeFormatError");var r=!1;null!==a.minTime&&o<a.minTime&&null!==a.maxTime&&o>a.maxTime&&(r=!0),e.each(a.disableTimeRanges,function(){if(o>=this[0]&&o<this[1])return r=!0,!1}),a.forceRoundTime&&(o=a.roundingFunction(o,a));var s=k(o,a);r?d(n,s,"error")&&n.trigger("timeRangeError"):d(n,s)}}}function m(e){return e.is("input")?e.val():e.data("ui-timepicker-value")}function d(e,i,t){if(e.is("input")){e.val(i);var n=e.data("timepicker-settings");n.useSelect&&"select"!=t&&"initial"!=t&&e.data("timepicker-list").val(o(_(i),n))}return e.data("ui-timepicker-value")!=i?(e.data("ui-timepicker-value",i),"select"==t?e.trigger("selectTime").trigger("changeTime").trigger("change","timepicker"):"error"!=t&&e.trigger("changeTime"),!0):(e.trigger("selectTime"),!1)}function f(e){switch(e.keyCode){case 13:case 9:return;default:e.preventDefault()}}function p(t){var n=e(this),a=n.data("timepicker-list");if(!a||!i(a)){if(40!=t.keyCode)return!0;y.show.call(n.get(0)),a=n.data("timepicker-list"),s(n)||n.focus()}switch(t.keyCode){case 13:return g(n)&&y.hide.apply(this),t.preventDefault(),!1;case 38:var o=a.find(".ui-timepicker-selected");return o.length?o.is(":first-child")||(o.removeClass("ui-timepicker-selected"),o.prev().addClass("ui-timepicker-selected"),o.prev().position().top<o.outerHeight()&&a.scrollTop(a.scrollTop()-o.outerHeight())):(a.find("li").each(function(i,t){if(e(t).position().top>0)return o=e(t),!1}),o.addClass("ui-timepicker-selected")),!1;case 40:return o=a.find(".ui-timepicker-selected"),0===o.length?(a.find("li").each(function(i,t){if(e(t).position().top>0)return o=e(t),!1}),o.addClass("ui-timepicker-selected")):o.is(":last-child")||(o.removeClass("ui-timepicker-selected"),o.next().addClass("ui-timepicker-selected"),o.next().position().top+2*o.outerHeight()>a.outerHeight()&&a.scrollTop(a.scrollTop()+o.outerHeight())),!1;case 27:a.find("li").removeClass("ui-timepicker-selected"),y.hide();break;case 9:y.hide();break;default:return!0}}function h(t){var n=e(this),a=n.data("timepicker-list"),o=n.data("timepicker-settings");if(!a||!i(a)||o.disableTextInput)return!0;switch(t.keyCode){case 96:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 65:case 77:case 80:case 186:case 8:case 46:o.typeaheadHighlight?c(n,a):a.hide()}}function g(e){var i=e.data("timepicker-settings"),t=e.data("timepicker-list"),n=null,a=t.find(".ui-timepicker-selected");return!a.hasClass("ui-timepicker-disabled")&&(a.length&&(n=a.data("time")),null!==n&&("string"!=typeof n&&(n=k(n,i)),d(e,n,"select")),!0)}function v(e,i){e=Math.abs(e);var t,n,a=Math.round(e/60),o=[];return a<60?o=[a,$.mins]:(t=Math.floor(a/60),n=a%60,30==i&&30==n&&(t+=$.decimal+5),o.push(t),o.push(1==t?$.hr:$.hrs),30!=i&&n&&(o.push(n),o.push($.mins))),o.join(" ")}function k(i,t){if("number"!=typeof i)return null;var n=parseInt(i%60),a=parseInt(i/60%60),o=parseInt(i/3600%24),r=new Date(1970,0,2,o,a,n,0);if(isNaN(r.getTime()))return null;if("function"===e.type(t.timeFormat))return t.timeFormat(r);for(var s,l,c="",u=0;u<t.timeFormat.length;u++)switch(l=t.timeFormat.charAt(u)){case"a":c+=r.getHours()>11?$.pm:$.am;break;case"A":c+=r.getHours()>11?$.PM:$.AM;break;case"g":s=r.getHours()%12,c+=0===s?"12":s;break;case"G":s=r.getHours(),i===b&&(s=t.show2400?24:0),c+=s;break;case"h":s=r.getHours()%12,0!==s&&s<10&&(s="0"+s),c+=0===s?"12":s;break;case"H":s=r.getHours(),i===b&&(s=t.show2400?24:0),c+=s>9?s:"0"+s;break;case"i":var a=r.getMinutes();c+=a>9?a:"0"+a;break;case"s":n=r.getSeconds(),c+=n>9?n:"0"+n;break;case"\\":u++,c+=t.timeFormat.charAt(u);break;default:c+=l}return c}function _(e,i){if(""===e||null===e)return null;if("object"==typeof e)return 3600*e.getHours()+60*e.getMinutes()+e.getSeconds();if("string"!=typeof e)return e;e=e.toLowerCase().replace(/[\s\.]/g,""),"a"!=e.slice(-1)&&"p"!=e.slice(-1)||(e+="m");var t="("+$.am.replace(".","")+"|"+$.pm.replace(".","")+"|"+$.AM.replace(".","")+"|"+$.PM.replace(".","")+")?",n=new RegExp("^"+t+"([0-9]?[0-9])\\W?([0-5][0-9])?\\W?([0-5][0-9])?"+t+"$"),a=e.match(n);if(!a)return null;var o=parseInt(1*a[2],10),r=o>24?o%24:o,s=a[1]||a[5],l=r;if(r<=12&&s){var c=s==$.pm||s==$.PM;l=12==r?c?12:0:r+(c?12:0)}var u=1*a[3]||0,m=1*a[4]||0,d=3600*l+60*u+m;if(r<12&&!s&&i&&i._twelveHourTime&&i.scrollDefault){var f=d-i.scrollDefault();f<0&&f>=b/-2&&(d=(d+b/2)%b)}return d}var b=86400,$={am:"am",pm:"pm",AM:"AM",PM:"PM",decimal:".",mins:"mins",hr:"hr",hrs:"hrs"},y={init:function(i){return this.each(function(){var a=e(this),o=[];for(var r in e.fn.timepicker.defaults)a.data(r)&&(o[r]=a.data(r));var s=e.extend({},e.fn.timepicker.defaults,o,i);if(s.lang&&($=e.extend($,s.lang)),s=t(s),a.data("timepicker-settings",s),a.addClass("ui-timepicker-input"),s.useSelect)n(a);else{if(a.prop("autocomplete","off"),s.showOn)for(var l in s.showOn)a.on(s.showOn[l]+".timepicker",y.show);a.on("change.timepicker",u),a.on("keydown.timepicker",p),a.on("keyup.timepicker",h),s.disableTextInput&&a.on("keydown.timepicker",f),s.disableInitFormat&&u.call(a.get(0))}})},show:function(t){var a=e(this),o=a.data("timepicker-settings");if(t&&t.preventDefault(),o.useSelect)return void a.data("timepicker-list").focus();s(a)&&a.blur();var u=a.data("timepicker-list");if(!a.prop("readonly")&&(u&&0!==u.length&&"function"!=typeof o.durationTime||(n(a),u=a.data("timepicker-list")),!i(u))){a.data("ui-timepicker-value",a.val()),c(a,u),y.hide(),u.show();var d={};o.orientation.match(/r/)?d.left=a.offset().left+a.outerWidth()-u.outerWidth()+parseInt(u.css("marginLeft").replace("px",""),10):d.left=a.offset().left+parseInt(u.css("marginLeft").replace("px",""),10);var f;f=o.orientation.match(/t/)?"t":o.orientation.match(/b/)?"b":a.offset().top+a.outerHeight(!0)+u.outerHeight()>e(window).height()+e(window).scrollTop()?"t":"b","t"==f?(u.addClass("ui-timepicker-positioned-top"),d.top=a.offset().top-u.outerHeight()+parseInt(u.css("marginTop").replace("px",""),10)):(u.removeClass("ui-timepicker-positioned-top"),d.top=a.offset().top+a.outerHeight()+parseInt(u.css("marginTop").replace("px",""),10)),u.offset(d);var p=u.find(".ui-timepicker-selected");if(!p.length){var h=_(m(a));null!==h?p=l(a,u,h):o.scrollDefault&&(p=l(a,u,o.scrollDefault()))}if(p&&p.length){var g=u.scrollTop()+p.position().top-p.outerHeight();u.scrollTop(g)}else u.scrollTop(0);return o.stopScrollPropagation&&e(document).on("wheel.ui-timepicker",".ui-timepicker-wrapper",function(i){i.preventDefault();var t=e(this).scrollTop();e(this).scrollTop(t+i.originalEvent.deltaY)}),e(document).on("touchstart.ui-timepicker mousedown.ui-timepicker",r),e(window).on("resize.ui-timepicker",r),o.closeOnWindowScroll&&e(document).on("scroll.ui-timepicker",r),a.trigger("showTimepicker"),this}},hide:function(t){var n=e(this),a=n.data("timepicker-settings");return a&&a.useSelect&&n.blur(),e(".ui-timepicker-wrapper").each(function(){var t=e(this);if(i(t)){var n=t.data("timepicker-input"),a=n.data("timepicker-settings");a&&a.selectOnBlur&&g(n),t.hide(),n.trigger("hideTimepicker")}}),this},option:function(i,a){return"string"==typeof i&&"undefined"==typeof a?e(this).data("timepicker-settings")[i]:this.each(function(){var o=e(this),r=o.data("timepicker-settings"),s=o.data("timepicker-list");"object"==typeof i?r=e.extend(r,i):"string"==typeof i&&(r[i]=a),r=t(r),o.data("timepicker-settings",r),s&&(s.remove(),o.data("timepicker-list",!1)),r.useSelect&&n(o)})},getSecondsFromMidnight:function(){return _(m(this))},getTime:function(e){var i=this,t=m(i);if(!t)return null;var n=_(t);if(null===n)return null;e||(e=new Date);var a=new Date(e);return a.setHours(n/3600),a.setMinutes(n%3600/60),a.setSeconds(n%60),a.setMilliseconds(0),a},isVisible:function(){var e=this,t=e.data("timepicker-list");return!(!t||!i(t))},setTime:function(e){var i=this,t=i.data("timepicker-settings");if(t.forceRoundTime)var n=o(_(e),t);else var n=k(_(e),t);return e&&null===n&&t.noneOption&&(n=e),d(i,n),i.data("timepicker-list")&&c(i,i.data("timepicker-list")),this},remove:function(){var e=this;if(e.hasClass("ui-timepicker-input")){var i=e.data("timepicker-settings");return e.removeAttr("autocomplete","off"),e.removeClass("ui-timepicker-input"),e.removeData("timepicker-settings"),e.off(".timepicker"),e.data("timepicker-list")&&e.data("timepicker-list").remove(),i.useSelect&&e.show(),e.removeData("timepicker-list"),this}}};e.fn.timepicker=function(i){return this.length?y[i]?this.hasClass("ui-timepicker-input")?y[i].apply(this,Array.prototype.slice.call(arguments,1)):this:"object"!=typeof i&&i?void e.error("Method "+i+" does not exist on jQuery.timepicker"):y.init.apply(this,arguments):this},e.fn.timepicker.defaults={appendTo:"body",className:null,closeOnWindowScroll:!1,disableTextInput:!1,disableTimeRanges:[],disableTouchKeyboard:!1,disableInitFormat:!1,durationTime:null,forceRoundTime:!1,maxTime:null,minTime:null,noneOption:!1,orientation:"l",roundingFunction:function(e,i){if(null===e)return null;if("number"!=typeof i.step)return e;var t=e%(60*i.step);return t>=30*i.step?e+=60*i.step-t:e-=t,e==b&&i.show2400?e:e%b},scrollDefault:null,selectOnBlur:!1,show2400:!1,showDuration:!1,showOn:["click","focus"],showOnFocus:!0,step:30,stopScrollPropagation:!1,timeFormat:"g:ia",typeaheadHighlight:!0,useSelect:!1}});var SMS_SUBSCRIBE_DIV="#id_subscribe_sms";!function(){var e=$(SMS_SUBSCRIBE_DIV).attr("data-phonemobile")||"";if(/opt-out-email-/.test(e)){/opt-out-email-hidden/.test(e)&&($("#id_email_box").hide(),$("#id_sms_subscribed").change(function(){this.checked||$("#id_email_box").show()})),window.actionkit.form.email=!1;var i=actionkit.forms.required;actionkit.forms.required=function(){var e=i();return $(e).filter(function(){return"email"!=this})},$("#id_email").removeAttr("required")}}();var mobilePhoneUpdate=function(){if($(this).val().replace(/\D/g,"").length>=10){var e=$(SMS_SUBSCRIBE_DIV).attr("data-phonemobile")||"";/opt-out/.test(e)&&($("#id_sms_subscribed").prop("checked",!0),$("#id_sms_subscribed").val("sms_subscribed")),$(SMS_SUBSCRIBE_DIV).show()}};$("input[name=phone],input[name=mobile_phone]").on("change unfocus",mobilePhoneUpdate).each(mobilePhoneUpdate),$("form[name=act]").on("actionkitbeforevalidation",function(){window.console&&console.log("actionkitbefore validation! (mobile check)");var e=$("input[name=phone],input[name=mobile_phone]").val().replace(/\D/g,""),i=$("#id_sms_subscribed",SMS_SUBSCRIBE_DIV).prop("checked");i&&e&&e.length>=10&&(window.console&&console.log("in mobile pathway, before validation"),""===$("#id_email").val()&&($("#id_suppress_subscribe").val("1"),$("#id_email").val(e+"-smssubscriber@example.com"),$("#id_email_box").hide()),$("#id_sms_subscribed").val("sms_subscribed"),$("#id_action_mobilesubscribe").val("1"),$("#id_sms_termsandconditions").val("sms_termsandconditions"),$("#id_robodial_termsandconditions").val("yes"))}),$("form.external-ak").on("submit",function(){var e=$("input[name=phone],input[name=mobile_phone]").val().replace(/\D/g,""),i=$("#id_sms_subscribed",SMS_SUBSCRIBE_DIV).prop("checked");i&&e&&e.length>=10&&(""===$("#id_email").val()&&($("#id_suppress_subscribe").val("1"),$("#id_email").val(e+"-smssubscriber@example.com"),$("#id_email_box").hide()),$("#id_sms_subscribed").val("sms_subscribed"),$("#id_action_mobilesubscribe").val("1"),$("#id_sms_termsandconditions").val("sms_termsandconditions"),$("#id_robodial_termsandconditions").val("yes"))}),$(document).ready(shuffleQuestions),$(document).ready(function(){var e=$('<div class="col-md-8 checkbox"></div>'),i=$('<input type="checkbox" name="retired" />').click(function(){var e=$(this),i=$("#employer-occupation-info");e.is(":checked")?(i.addClass("hidden"),i.find("#action_employer").val("None"),i.find("#action_occupation").val("Not employed")):i.removeClass("hidden")}),t=$('<label for="retired"> </label>'),n=$("<span>I am retired or unemployed</span>").click(function(){$("input[name=retired]").click()});t.prepend(i).append(n),e.append(t),$("#retired-checkbox").append(e)}),$(document).ready(function(){$("#card_num").length>0&&$("#card_num").validateCreditCard(function(e){$("#card_num_box .cc-icons .wf-icon").removeClass("matched"),e.valid&&$("#card_num_box .cc-icons .icon-"+e.card_type.name).addClass("matched"),e.valid||0==$("#card_num").val().length?$("#card_num_box").removeClass("has-error"):$("#card_num_box").addClass("has-error")})});