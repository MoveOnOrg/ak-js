function confirmLargeDonation(e){return!!$("form").data("confirmed")||($("#confirm-big-donation .donation-amount").text(e),$("#confirm-big-donation .btn.yes").click(function(){$("#confirm-big-donation").on("hidden.bs.modal",function(e){$("form").data("confirmed",!0).trigger("submit")}),$("#confirm-big-donation").modal("hide")}),$("#confirm-big-donation").modal(),!1)}function toggleAll(){$(this).closest("form").find("input.toggle").attr("checked",this.checked)}function handleListChanged(){var e=$(this).closest("form"),t=$("input.toggle:checked").length;0==t?t=$("input.toggle").length:e.find(".check-recipients-help").hide(),e.find(".to-count").text(t)}function showEmailForm(){var e=$(this).closest("form");return e.find(".roster-controls").slideUp("fast"),e.find(".contact-form").slideDown("fast"),!1}function handleJumpLink(){var e;if("email-cohosts-link"==this.id?e=$(".contact-cohosts"):"email-attendees-link"==this.id?e=$(".contact-attendees"):"invite-friends-link"==this.id&&(e=$("#taf")),/^email-/.test(this.id)){var t=e.closest("form").find('input[type="submit"].email');showEmailForm.apply(t,[])}return e.addClass("target"),!0}function confirmSubmit(){return confirm($(this).attr("data-confirm-message"))}function setFormAction(){var e=$(this).closest("form")[0];(e||e.action)&&(e.action.value=this.name)}function validateRoster(e){var t=e.action.value;/(change-role|remove)/.test(t)&&!$(e).find("input.toggle:checked").length&&(actionkit.errors["user_id:missing"]=actionkit.forms.errorMessage("event_roster_user_ids:missing")),"send_email"!=t||e.body.value||(actionkit.errors["body:missing"]=actionkit.forms.errorMessage("event_contact_body:missing"))}function confirmRoster(e){var t=e.action.value,n=$(e).find('input[name="'+t+'"]'),i=n.attr("confirm-message");return!i||confirm(i)}function toggleRow(e){var t=$(this).closest("tr").find(".toggle")[0];return t&&(t.checked=!t.checked),!1}function updateConfirmationMessage(){for(var e in actionkit.args)e.indexOf(":")>0&&1==actionkit.args[e]&&($("#ak-confirmation").text(actionkit.forms.text["error_"+e]),$("#ak-confirmation").show())}function shuffle(e){for(var t,n,i=e.length;0!==i;)n=Math.floor(Math.random()*i),i-=1,t=e[i],e[i]=e[n],e[n]=t;return e}function shuffleQuestions(){$(".randomized-options").each(function(){var e=$(this),t=[];e.find(".option").each(function(){var e=$(this);t.push(e.clone()),e.remove()}),shuffle(t),$.each(t,function(){e.append($(this))})})}(function(){var e,t=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};e=jQuery,e.fn.validateCreditCard=function(n,i){var o,a,s,l,r,c,m,u,d,h,f,g,p;for(l=[{name:"amex",pattern:/^3[47]/,valid_length:[15]},{name:"diners_club_carte_blanche",pattern:/^30[0-5]/,valid_length:[14]},{name:"diners_club_international",pattern:/^36/,valid_length:[14]},{name:"jcb",pattern:/^35(2[89]|[3-8][0-9])/,valid_length:[16]},{name:"laser",pattern:/^(6304|670[69]|6771)/,valid_length:[16,17,18,19]},{name:"visa_electron",pattern:/^(4026|417500|4508|4844|491(3|7))/,valid_length:[16]},{name:"visa",pattern:/^4/,valid_length:[16]},{name:"mastercard",pattern:/^5[1-5]/,valid_length:[16]},{name:"maestro",pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,valid_length:[12,13,14,15,16,17,18,19]},{name:"discover",pattern:/^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)/,valid_length:[16]}],o=!1,n&&("object"==typeof n?(i=n,o=!1,n=null):"function"==typeof n&&(o=!0)),null==i&&(i={}),null==i.accept&&(i.accept=function(){var e,t,n;for(n=[],e=0,t=l.length;e<t;e++)a=l[e],n.push(a.name);return n}()),p=i.accept,f=0,g=p.length;f<g;f++)if(s=p[f],t.call(function(){var e,t,n;for(n=[],e=0,t=l.length;e<t;e++)a=l[e],n.push(a.name);return n}(),s)<0)throw"Credit card type '"+s+"' is not supported";return r=function(e){var n,o,r;for(r=function(){var e,n,o,s;for(s=[],e=0,n=l.length;e<n;e++)a=l[e],o=a.name,t.call(i.accept,o)>=0&&s.push(a);return s}(),n=0,o=r.length;n<o;n++)if(s=r[n],e.match(s.pattern))return s;return null},m=function(e){var t,n,i,o,a,s;for(i=0,s=e.split("").reverse(),n=o=0,a=s.length;o<a;n=++o)t=s[n],t=+t,n%2?(t*=2,i+=t<10?t:t-9):i+=t;return i%10===0},c=function(e,n){var i;return i=e.length,t.call(n.valid_length,i)>=0},h=function(e){return function(e){var t,n;return s=r(e),n=!1,t=!1,null!=s&&(n=m(e),t=c(e,s)),{card_type:s,valid:n&&t,luhn_valid:n,length_valid:t}}}(this),d=function(t){return function(){var n;return n=u(e(t).val()),h(n)}}(this),u=function(e){return e.replace(/[ -]/g,"")},o?(this.on("input.jccv",function(t){return function(){return e(t).off("keyup.jccv"),n.call(t,d())}}(this)),this.on("keyup.jccv",function(e){return function(){return n.call(e,d())}}(this)),n.call(this,d()),this):d()}}).call(this),$(document).ready(function(){$("form").data("confirmed",!1).submit(function(e){var t=$("#total-to-split"),n=0,i=$("input:radio[name=amount]:checked");n=i.length>0?parseFloat(i.val()):parseFloat($("#amount_other_field").val()),t.length>0&&(n=parseFloat(t.val())),n>=250&&(confirmLargeDonation(n)||e.preventDefault())}),$("form input").keyup(function(){$("form").data("confirmed",!1)})});var EmailSuggestion={last_email_suggestion:"",email_field:void 0,email_suggestion_field:void 0,default_domains:["gmail.com","yahoo.com","hotmail.com","aol.com","comcast.net","msn.com","sbcglobal.net","verizon.net","att.net","bellsouth.net","cox.net","earthlink.net","live.com","mac.com","charter.net","me.com","ymail.com","optonline.net","juno.com","excite.com","netscape.net","pacbell.net"],init:function(e){e=e||{};var t=e.string||'<div class="blurb moveon-bright-red bump-bottom-1"> Did you mean <strong><span style="cursor:pointer;"onclick="EmailSuggestion.ok()">{{email}}</span></strong>?  <a onclick="EmailSuggestion.ok()">Yes!</a> / <a onclick="EmailSuggestion.nevermind()">No</a> </div>',n=e.domains||this.default_domains;if(e.email_id?this.email_field=$("#"+e.email_id):e.email_selector?this.email_field=$(e.email_selector):this.email_field=$('input[name="email"]'),!this.email_field.length)throw new Error("Unable to find email field in setup_email_suggestion - please pass in email_id or email_selector.");e.email_suggestion_id?this.email_suggestion_field=$("#"+e.email_suggestion_id):e.email_suggestion_selector&&(this.email_suggestion_field=$(e.email_suggestion_selector)),e.validation_error_class&&(this.validation_error_class=e.validation_error_class),this.email_suggestion_field&&this.email_suggestion_field.length||(this.email_field.after('<span id="auto_email_suggestion" class="email_suggestion hidden"></span>'),this.email_suggestion_field=$("#auto_email_suggestion")),this.email_field.keypress(function(){/.*@.*\.\w+/.test($(this).val())?EmailSuggestion.coloroff():EmailSuggestion.coloron()}),this.email_field.blur(function(){$(this).mailcheck({domains:n,suggested:function(e,n){EmailSuggestion.last_email_suggestion=n,EmailSuggestion.email_suggestion_field.html(t.replace("{{email}}",n.full)).show().css("visibility","visible"),EmailSuggestion.coloron()},empty:function(e){EmailSuggestion.email_suggestion_field.html("")}})})},ok:function(){this.email_field.val(this.last_email_suggestion.full),this.email_suggestion_field.html(""),this.coloroff()},nevermind:function(){this.email_suggestion_field.html(""),this.coloroff()},coloron:function(){this.validation_error_class?this.email_field.addClass(this.validation_error_class):this.email_field.attr("style","color:#c22326;")},coloroff:function(){this.validation_error_class?this.email_field.removeClass(this.validation_error_class):this.email_field.attr("style","color:#555555;")}};window.jsErrors=[],window.onerror=function(e){window.jsErrors[window.jsErrors.length]=e},$(document).ready(function(){$(".if-js").show(),$("a[data-confirm-message]").click(confirmSubmit),$("input.toggle-all").click(toggleAll),$(".event-roster td:not(.toggle-col)").click(toggleRow),$('input[type="submit"].email').click(showEmailForm),$('input[type="submit"]').click(setFormAction),$(".jump-link").click(handleJumpLink),$("input.toggle").click(handleListChanged),$(".add-more-link").shorten({moreText:"see more",lessText:""}),$(function(){$('[data-toggle="tooltip"]').tooltip()}),updateConfirmationMessage()}),$(document).ready(function(){$("form").each(function(){var e=this;if(!(null==location.search||location.search.length<1))for(var t=location.search.substring(1).split("&"),n=0;n<t.length;++n){var i=t[n].split("="),o=i[0],a=unescape(i[1].replace(/\+/g," ")),s=e.elements[o],l=null,r=!1;switch(null!=s&&(null!=s.length&&s.length>=1&&null!=s[0].type&&void 0!=s[0].type?(l=s[0].type,r=!0):l=s.type),l){case"text":case"hidden":case"textarea":r&&(s=s[0]),s.value=a,$(s).trigger("change");break;case"select-one":case"select-multiple":r&&(s=s[0]);for(var c=0;c<s.options.length;++c){var m=s.options[c],u=m.value;if(null!=u&&""!=u||(u=m.text),u==a){m.selected=!0,$(s).trigger("change");break}}break;case"checkbox":case"radio":if(r){for(var d=0;d<s.length;++d)if(s[d].value==a){s[d].checked=!0,$(s).trigger("change");break}}else s.checked=!0}}})}),function(e){e.fn.mailcheck=function(e,t){var n=["yahoo.com","google.com","hotmail.com","gmail.com","me.com","aol.com","mac.com","live.com","comcast.net","googlemail.com","msn.com","hotmail.co.uk","yahoo.co.uk","facebook.com","verizon.net","sbcglobal.net","att.net","gmx.com","mail.com"];if("object"==typeof e&&void 0===t)e.domains=e.domains||n;else{var i=e;e=t,e.domains=i||n}var o=Kicksend.mailcheck.suggest(encodeURI(this.val()),e.domains);o?e.suggested&&e.suggested(this,o):e.empty&&e.empty(this)}}(jQuery);var Kicksend={mailcheck:{threshold:3,suggest:function(e,t){e=e.toLowerCase();var n=this.splitEmail(e),i=this.findClosestDomain(n.domain,t);return!!i&&{address:n.address,domain:i,full:n.address+"@"+i}},findClosestDomain:function(e,t){for(var n,i=99,o=null,a=0;a<t.length;a++){if(e===t[a])return!1;n=this.stringDistance(e,t[a]),n<i&&(i=n,o=t[a])}return i<=this.threshold&&null!==o&&o},stringDistance:function(e,t){if(null==e||0===e.length)return null==t||0===t.length?0:t.length;if(null==t||0===t.length)return e.length;for(var n=0,i=0,o=0,a=0,s=5;n+i<e.length&&n+o<t.length;){if(e.charAt(n+i)==t.charAt(n+o))a++;else{i=0,o=0;for(var l=0;l<s;l++){if(n+l<e.length&&e.charAt(n+l)==t.charAt(n)){i=l;break}if(n+l<t.length&&e.charAt(n)==t.charAt(n+l)){o=l;break}}}n++}return(e.length+t.length)/2-a},splitEmail:function(e){var t=e.split("@");if(t.length<2)return!1;for(var n=0;n<t.length;n++)if(""===t[n])return!1;return{domain:t.pop(),address:t.join("@")}}}};!function(e){e.fn.shorten=function(t){"use strict";var n={showChars:100,minHideChars:10,ellipsesText:"...",moreText:"more",lessText:"less",onLess:function(){},onMore:function(){},errMsg:null,force:!1};return t&&e.extend(n,t),!(e(this).data("jquery.shorten")&&!n.force)&&(e(this).data("jquery.shorten",!0),e(document).off("click",".morelink"),e(document).on({click:function(){var t=e(this);return t.hasClass("less")?(t.removeClass("less"),t.html(n.moreText),t.parent().prev().animate({height:"0%"},function(){t.parent().prev().prev().show()}).hide("fast",function(){n.onLess()})):(t.addClass("less"),t.html(n.lessText),t.parent().prev().animate({height:"100%"},function(){t.parent().prev().prev().hide()}).show("fast",function(){n.onMore()})),!1}},".morelink"),this.each(function(){var t=e(this),i=t.html(),o=t.text().length;if(o>n.showChars+n.minHideChars){var a=i.substr(0,n.showChars);if(a.indexOf("<")>=0){for(var s=!1,l="",r=0,c=[],m=null,u=0,d=0;d<=n.showChars;u++)if("<"!=i[u]||s||(s=!0,m=i.substring(u+1,i.indexOf(">",u)),"/"==m[0]?m!="/"+c[0]?n.errMsg="ERROR en HTML: the top of the stack should be the tag that closes":c.shift():"br"!=m.toLowerCase()&&c.unshift(m)),s&&">"==i[u]&&(s=!1),s)l+=i.charAt(u);else if(d++,r<=n.showChars)l+=i.charAt(u),r++;else if(c.length>0){for(j=0;j<c.length;j++)l+="</"+c[j]+">";break}a=e("<div/>").html(l+'<span class="ellip">'+n.ellipsesText+"</span>").html()}else a+=n.ellipsesText;var h='<div class="shortcontent">'+a+'</div><div class="allcontent">'+i+'</div><span><a href="javascript://nop/" class="morelink">'+n.moreText+"</a></span>";t.html(h),t.find(".allcontent").hide(),e(".shortcontent p:last",t).css("margin-bottom",0)}}))}}(jQuery),$(document).ready(shuffleQuestions),$(document).ready(function(){var e=$('<div class="col-md-8 checkbox"></div>'),t=$('<input type="checkbox" name="retired" />').click(function(){var e=$(this),t=$("#employer-occupation-info");e.is(":checked")?(t.addClass("hidden"),t.find("#action_employer").val("None"),t.find("#action_occupation").val("Not employed")):t.removeClass("hidden")}),n=$('<label for="retired"> </label>'),i=$("<span>I am retired or unemployed</span>").click(function(){$("input[name=retired]").click()});n.prepend(t).append(i),e.append(n),$("#retired-checkbox").append(e)}),$(document).ready(function(){$("#card_num").length>0&&$("#card_num").validateCreditCard(function(e){$("#card_num_box .cc-icons .wf-icon").removeClass("matched"),e.valid&&$("#card_num_box .cc-icons .icon-"+e.card_type.name).addClass("matched"),e.valid||0==$("#card_num").val().length?$("#card_num_box").removeClass("has-error"):$("#card_num_box").addClass("has-error")})});