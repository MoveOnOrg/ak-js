function confirmLargeDonation(e){return!!$("form").data("confirmed")||($("#confirm-big-donation .donation-amount").text(e),$("#confirm-big-donation .btn.yes").click(function(){$("#confirm-big-donation").on("hidden.bs.modal",function(e){$("form").data("confirmed",!0).trigger("submit")}),$("#confirm-big-donation").modal("hide")}),$("#confirm-big-donation").modal(),!1)}function toggleAll(){$(this).closest("form").find("input.toggle").attr("checked",this.checked)}function handleListChanged(){var e=$(this).closest("form"),t=$("input.toggle:checked").length;0==t?t=$("input.toggle").length:e.find(".check-recipients-help").hide(),e.find(".to-count").text(t)}function showEmailForm(){var e=$(this).closest("form");return e.find(".roster-controls").slideUp("fast"),e.find(".contact-form").slideDown("fast"),!1}function handleJumpLink(){var e;if("email-cohosts-link"==this.id?e=$(".contact-cohosts"):"email-attendees-link"==this.id?e=$(".contact-attendees"):"invite-friends-link"==this.id&&(e=$("#taf")),/^email-/.test(this.id)){var t=e.closest("form").find('input[type="submit"].email');showEmailForm.apply(t,[])}return e.addClass("target"),!0}function confirmSubmit(){return confirm($(this).attr("data-confirm-message"))}function setFormAction(){var e=$(this).closest("form")[0];(e||e.action)&&(e.action.value=this.name)}function validateRoster(e){var t=e.action.value;/(change-role|remove)/.test(t)&&!$(e).find("input.toggle:checked").length&&(actionkit.errors["user_id:missing"]=actionkit.forms.errorMessage("event_roster_user_ids:missing")),"send_email"!=t||e.body.value||(actionkit.errors["body:missing"]=actionkit.forms.errorMessage("event_contact_body:missing"))}function confirmRoster(e){var t=e.action.value,i=$(e).find('input[name="'+t+'"]'),n=i.attr("confirm-message");return!n||confirm(n)}function toggleRow(e){var t=$(this).closest("tr").find(".toggle")[0];return t&&(t.checked=!t.checked),!1}function updateConfirmationMessage(){for(var e in actionkit.args)e.indexOf(":")>0&&1==actionkit.args[e]&&($("#ak-confirmation").text(actionkit.forms.text["error_"+e]),$("#ak-confirmation").show())}function shuffle(e){for(var t,i,n=e.length;0!==n;)i=Math.floor(Math.random()*n),n-=1,t=e[n],e[n]=e[i],e[i]=t;return e}function shuffleQuestions(){$(".randomized-options").each(function(){var e=$(this),t=[];e.find(".option").each(function(){var e=$(this);t.push(e.clone()),e.remove()}),shuffle(t),$.each(t,function(){e.append($(this))})})}(function(){var e,t=[].indexOf||function(e){for(var t=0,i=this.length;t<i;t++)if(t in this&&this[t]===e)return t;return-1};e=jQuery,e.fn.validateCreditCard=function(i,n){var o,a,l,r,s,c,m,u,d,f,h,g,v;for(r=[{name:"amex",pattern:/^3[47]/,valid_length:[15]},{name:"diners_club_carte_blanche",pattern:/^30[0-5]/,valid_length:[14]},{name:"diners_club_international",pattern:/^36/,valid_length:[14]},{name:"jcb",pattern:/^35(2[89]|[3-8][0-9])/,valid_length:[16]},{name:"laser",pattern:/^(6304|670[69]|6771)/,valid_length:[16,17,18,19]},{name:"visa_electron",pattern:/^(4026|417500|4508|4844|491(3|7))/,valid_length:[16]},{name:"visa",pattern:/^4/,valid_length:[16]},{name:"mastercard",pattern:/^5[1-5]/,valid_length:[16]},{name:"maestro",pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,valid_length:[12,13,14,15,16,17,18,19]},{name:"discover",pattern:/^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)/,valid_length:[16]}],o=!1,i&&("object"==typeof i?(n=i,o=!1,i=null):"function"==typeof i&&(o=!0)),null==n&&(n={}),null==n.accept&&(n.accept=function(){var e,t,i;for(i=[],e=0,t=r.length;e<t;e++)a=r[e],i.push(a.name);return i}()),v=n.accept,h=0,g=v.length;h<g;h++)if(l=v[h],t.call(function(){var e,t,i;for(i=[],e=0,t=r.length;e<t;e++)a=r[e],i.push(a.name);return i}(),l)<0)throw"Credit card type '"+l+"' is not supported";return s=function(e){var i,o,s;for(s=function(){var e,i,o,l;for(l=[],e=0,i=r.length;e<i;e++)a=r[e],o=a.name,t.call(n.accept,o)>=0&&l.push(a);return l}(),i=0,o=s.length;i<o;i++)if(l=s[i],e.match(l.pattern))return l;return null},m=function(e){var t,i,n,o,a,l;for(n=0,l=e.split("").reverse(),i=o=0,a=l.length;o<a;i=++o)t=l[i],t=+t,i%2?(t*=2,n+=t<10?t:t-9):n+=t;return n%10===0},c=function(e,i){var n;return n=e.length,t.call(i.valid_length,n)>=0},f=function(e){return function(e){var t,i;return l=s(e),i=!1,t=!1,null!=l&&(i=m(e),t=c(e,l)),{card_type:l,valid:i&&t,luhn_valid:i,length_valid:t}}}(this),d=function(t){return function(){var i;return i=u(e(t).val()),f(i)}}(this),u=function(e){return e.replace(/[ -]/g,"")},o?(this.on("input.jccv",function(t){return function(){return e(t).off("keyup.jccv"),i.call(t,d())}}(this)),this.on("keyup.jccv",function(e){return function(){return i.call(e,d())}}(this)),i.call(this,d()),this):d()}}).call(this),$(document).ready(function(){$("form").data("confirmed",!1).submit(function(e){var t=$("#total-to-split"),i=0,n=$("input:radio[name=amount]:checked");i=n.length>0?parseFloat(n.val()):parseFloat($("#amount_other_field").val()),t.length>0&&(i=parseFloat(t.val())),i>=250&&(confirmLargeDonation(i)||e.preventDefault())}),$("form input").keyup(function(){$("form").data("confirmed",!1)})});var EmailSuggestion={last_email_suggestion:"",email_field:void 0,email_suggestion_field:void 0,default_domains:["gmail.com","yahoo.com","hotmail.com","aol.com","comcast.net","msn.com","sbcglobal.net","verizon.net","att.net","bellsouth.net","cox.net","earthlink.net","live.com","mac.com","charter.net","me.com","ymail.com","optonline.net","juno.com","excite.com","netscape.net","pacbell.net"],init:function(e){e=e||{};var t=e.string||'<div class="blurb moveon-bright-red bump-bottom-1"> Did you mean <strong><span style="cursor:pointer;"onclick="EmailSuggestion.ok()">{{email}}</span></strong>?  <a onclick="EmailSuggestion.ok()">Yes!</a> / <a onclick="EmailSuggestion.nevermind()">No</a> </div>',i=e.domains||this.default_domains;if(e.email_id?this.email_field=$("#"+e.email_id):e.email_selector?this.email_field=$(e.email_selector):this.email_field=$('input[name="email"]'),!this.email_field.length)throw new Error("Unable to find email field in setup_email_suggestion - please pass in email_id or email_selector.");e.email_suggestion_id?this.email_suggestion_field=$("#"+e.email_suggestion_id):e.email_suggestion_selector&&(this.email_suggestion_field=$(e.email_suggestion_selector)),e.validation_error_class&&(this.validation_error_class=e.validation_error_class),this.email_suggestion_field&&this.email_suggestion_field.length||(this.email_field.after('<span id="auto_email_suggestion" class="email_suggestion hidden"></span>'),this.email_suggestion_field=$("#auto_email_suggestion")),this.email_field.keypress(function(){/.*@.*\.\w+/.test($(this).val())?EmailSuggestion.coloroff():EmailSuggestion.coloron()}),this.email_field.blur(function(){$(this).mailcheck({domains:i,suggested:function(e,i){EmailSuggestion.last_email_suggestion=i,EmailSuggestion.email_suggestion_field.html(t.replace("{{email}}",i.full)).show().css("visibility","visible"),EmailSuggestion.coloron()},empty:function(e){EmailSuggestion.email_suggestion_field.html("")}})})},ok:function(){this.email_field.val(this.last_email_suggestion.full),this.email_suggestion_field.html(""),this.coloroff()},nevermind:function(){this.email_suggestion_field.html(""),this.coloroff()},coloron:function(){this.validation_error_class?this.email_field.addClass(this.validation_error_class):this.email_field.attr("style","color:#c22326;")},coloroff:function(){this.validation_error_class?this.email_field.removeClass(this.validation_error_class):this.email_field.attr("style","color:#555555;")}};window.jsErrors=[],window.onerror=function(e){window.jsErrors[window.jsErrors.length]=e},$(document).ready(function(){$(".if-js").show(),$("a[data-confirm-message]").click(confirmSubmit),$("input.toggle-all").click(toggleAll),$(".event-roster td:not(.toggle-col)").click(toggleRow),$('input[type="submit"].email').click(showEmailForm),$('input[type="submit"]').click(setFormAction),$(".jump-link").click(handleJumpLink),$("input.toggle").click(handleListChanged),updateConfirmationMessage()}),$(document).ready(function(){$("form").each(function(){var e=this;if(!(null==location.search||location.search.length<1))for(var t=location.search.substring(1).split("&"),i=0;i<t.length;++i){var n=t[i].split("="),o=n[0],a=unescape(n[1].replace(/\+/g," ")),l=e.elements[o],r=null,s=!1;switch(null!=l&&(null!=l.length&&l.length>=1&&null!=l[0].type&&void 0!=l[0].type?(r=l[0].type,s=!0):r=l.type),r){case"text":case"hidden":case"textarea":s&&(l=l[0]),l.value=a,$(l).trigger("change");break;case"select-one":case"select-multiple":s&&(l=l[0]);for(var c=0;c<l.options.length;++c){var m=l.options[c],u=m.value;if(null!=u&&""!=u||(u=m.text),u==a){m.selected=!0,$(l).trigger("change");break}}break;case"checkbox":case"radio":if(s){for(var d=0;d<l.length;++d)if(l[d].value==a){l[d].checked=!0,$(l).trigger("change");break}}else l.checked=!0}}})}),function(e){e.fn.mailcheck=function(e,t){var i=["yahoo.com","google.com","hotmail.com","gmail.com","me.com","aol.com","mac.com","live.com","comcast.net","googlemail.com","msn.com","hotmail.co.uk","yahoo.co.uk","facebook.com","verizon.net","sbcglobal.net","att.net","gmx.com","mail.com"];if("object"==typeof e&&void 0===t)e.domains=e.domains||i;else{var n=e;e=t,e.domains=n||i}var o=Kicksend.mailcheck.suggest(encodeURI(this.val()),e.domains);o?e.suggested&&e.suggested(this,o):e.empty&&e.empty(this)}}(jQuery);var Kicksend={mailcheck:{threshold:3,suggest:function(e,t){e=e.toLowerCase();var i=this.splitEmail(e),n=this.findClosestDomain(i.domain,t);return!!n&&{address:i.address,domain:n,full:i.address+"@"+n}},findClosestDomain:function(e,t){for(var i,n=99,o=null,a=0;a<t.length;a++){if(e===t[a])return!1;i=this.stringDistance(e,t[a]),i<n&&(n=i,o=t[a])}return n<=this.threshold&&null!==o&&o},stringDistance:function(e,t){if(null==e||0===e.length)return null==t||0===t.length?0:t.length;if(null==t||0===t.length)return e.length;for(var i=0,n=0,o=0,a=0,l=5;i+n<e.length&&i+o<t.length;){if(e.charAt(i+n)==t.charAt(i+o))a++;else{n=0,o=0;for(var r=0;r<l;r++){if(i+r<e.length&&e.charAt(i+r)==t.charAt(i)){n=r;break}if(i+r<t.length&&e.charAt(i)==t.charAt(i+r)){o=r;break}}}i++}return(e.length+t.length)/2-a},splitEmail:function(e){var t=e.split("@");if(t.length<2)return!1;for(var i=0;i<t.length;i++)if(""===t[i])return!1;return{domain:t.pop(),address:t.join("@")}}}};$(document).ready(shuffleQuestions),$(document).ready(function(){var e=$('<div class="col-md-8 checkbox"></div>'),t=$('<input type="checkbox" name="retired" />').click(function(){var e=$(this),t=$("#employer-occupation-info");e.is(":checked")?(t.addClass("hidden"),t.find("#action_employer").val("None"),t.find("#action_occupation").val("Not employed")):t.removeClass("hidden")}),i=$('<label for="retired"> </label>'),n=$("<span>I am retired or unemployed</span>").click(function(){$("input[name=retired]").click()});i.prepend(t).append(n),e.append(i),$("#retired-checkbox").append(e)}),$(document).ready(function(){$("#card_num").length>0&&$("#card_num").validateCreditCard(function(e){$("#card_num_box .cc-icons .wf-icon").removeClass("matched"),e.valid&&$("#card_num_box .cc-icons .icon-"+e.card_type.name).addClass("matched"),e.valid||0==$("#card_num").val().length?$("#card_num_box").removeClass("has-error"):$("#card_num_box").addClass("has-error")})});