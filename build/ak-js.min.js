function confirmLargeDonation(e){return!!$("form").data("confirmed")||($("#confirm-big-donation .donation-amount").text(e),$("#confirm-big-donation .btn.yes").click(function(){$("#confirm-big-donation").on("hidden.bs.modal",function(e){$("form").data("confirmed",!0).trigger("submit")}),$("#confirm-big-donation").modal("hide")}),$("#confirm-big-donation").modal(),!1)}function toggleAll(){$(this).closest("form").find("input.toggle").attr("checked",this.checked)}function handleListChanged(){var e=$(this).closest("form"),i=$("input.toggle:checked").length;0==i?i=$("input.toggle").length:e.find(".check-recipients-help").hide(),e.find(".to-count").text(i)}function showEmailForm(){var e=$(this).closest("form");return e.find(".roster-controls").slideUp("fast"),e.find(".contact-form").slideDown("fast"),!1}function handleJumpLink(){var e;if("email-cohosts-link"==this.id?e=$(".contact-cohosts"):"email-attendees-link"==this.id?e=$(".contact-attendees"):"invite-friends-link"==this.id&&(e=$("#taf")),/^email-/.test(this.id)){var i=e.closest("form").find('input[type="submit"].email');showEmailForm.apply(i,[])}return e.addClass("target"),!0}function confirmSubmit(){return confirm($(this).attr("data-confirm-message"))}function setFormAction(){var e=$(this).closest("form")[0];(e||e.action)&&(e.action.value=this.name)}function validateRoster(e){var i=e.action.value;/(change-role|remove)/.test(i)&&!$(e).find("input.toggle:checked").length&&(actionkit.errors["user_id:missing"]=actionkit.forms.errorMessage("event_roster_user_ids:missing")),"send_email"!=i||e.body.value||(actionkit.errors["body:missing"]=actionkit.forms.errorMessage("event_contact_body:missing"))}function confirmRoster(e){var i=e.action.value,t=$(e).find('input[name="'+i+'"]'),n=t.attr("confirm-message");return!n||confirm(n)}function toggleRow(e){var i=$(this).closest("tr").find(".toggle")[0];return i&&(i.checked=!i.checked),!1}function updateConfirmationMessage(){for(var e in actionkit.args)e.indexOf(":")>0&&1==actionkit.args[e]&&($("#ak-confirmation").text(actionkit.forms.text["error_"+e]),$("#ak-confirmation").show())}function shuffle(e){for(var i,t,n=e.length;0!==n;)t=Math.floor(Math.random()*n),n-=1,i=e[n],e[n]=e[t],e[t]=i;return e}function shuffleQuestions(){$(".randomized-options").each(function(){var e=$(this),i=[];e.find(".option").each(function(){var e=$(this);i.push(e.clone()),e.remove()}),shuffle(i),$.each(i,function(){e.append($(this))})})}function makeFormButton(){var e=$("#take-this-survey-text").text(),i=$("body").hasClass("survey-page")?e:$("button:submit").text();if($("body").hasClass("survey-page")&&$(".form-section").length>0){$("body").addClass("has-page-footer");var t=$("<div class='page-footer page-footer--toggle'></div>");t.appendTo("body"),$formToggle=$("<a href='#' class='btn-toggle toggle-form'>"+i+"</a>").appendTo(t),$formToggle.click(function(e){e.preventDefault(),$("html, body").animate({scrollTop:$("[data-viewable]").offset().top-60},200)}),$(window).scroll(function(){checkViewable($("[data-viewable]"))}),checkViewable($("[data-viewable]"))}}function checkViewable(e){var i=isScrolledIntoView(e);$("body").removeClass("form-viewable"),i&&$("body").addClass("form-viewable")}function isScrolledIntoView(e){var i=$(window).scrollTop(),t=i+$(window).height(),n=$(e).offset().top,o=n+$(e).height();return t>=n&&i<=o}$(document).ready(function(){$("form").data("confirmed",!1).submit(function(e){var i=$("#total-to-split"),t=0,n=$("input:radio[name=amount]:checked");t=n.length>0?parseFloat(n.val()):parseFloat($("#amount_other_field").val()),i.length>0&&(t=parseFloat(i.val())),t>=250&&(confirmLargeDonation(t)||e.preventDefault())}),$("form input").keyup(function(){$("form").data("confirmed",!1)})});var EmailSuggestion={last_email_suggestion:"",email_field:void 0,email_suggestion_field:void 0,default_domains:["gmail.com","yahoo.com","hotmail.com","aol.com","comcast.net","msn.com","sbcglobal.net","verizon.net","att.net","bellsouth.net","cox.net","earthlink.net","live.com","mac.com","charter.net","me.com","ymail.com","optonline.net","juno.com","excite.com","netscape.net","pacbell.net"],init:function(e){e=e||{};var i=e.string||'<div class="blurb moveon-bright-red bump-bottom-1"> Did you mean <strong><span style="cursor:pointer;"onclick="EmailSuggestion.ok()">{{email}}</span></strong>?  <a onclick="EmailSuggestion.ok()">Yes!</a> / <a onclick="EmailSuggestion.nevermind()">No</a> </div>',t=e.domains||this.default_domains;if(e.email_id?this.email_field=$("#"+e.email_id):e.email_selector?this.email_field=$(e.email_selector):this.email_field=$('input[name="email"]'),!this.email_field.length)throw new Error("Unable to find email field in setup_email_suggestion - please pass in email_id or email_selector.");e.email_suggestion_id?this.email_suggestion_field=$("#"+e.email_suggestion_id):e.email_suggestion_selector&&(this.email_suggestion_field=$(e.email_suggestion_selector)),e.validation_error_class&&(this.validation_error_class=e.validation_error_class),this.email_suggestion_field&&this.email_suggestion_field.length||(this.email_field.after('<span id="auto_email_suggestion" class="email_suggestion hidden"></span>'),this.email_suggestion_field=$("#auto_email_suggestion")),this.email_field.keypress(function(){/.*@.*\.\w+/.test($(this).val())?EmailSuggestion.coloroff():EmailSuggestion.coloron()}),this.email_field.blur(function(){$(this).mailcheck({domains:t,suggested:function(e,t){EmailSuggestion.last_email_suggestion=t,EmailSuggestion.email_suggestion_field.html(i.replace("{{email}}",t.full)).show().css("visibility","visible"),EmailSuggestion.coloron()},empty:function(e){EmailSuggestion.email_suggestion_field.html("")}})})},ok:function(){this.email_field.val(this.last_email_suggestion.full),this.email_suggestion_field.html(""),this.coloroff()},nevermind:function(){this.email_suggestion_field.html(""),this.coloroff()},coloron:function(){this.validation_error_class?this.email_field.addClass(this.validation_error_class):this.email_field.attr("style","color:#c22326;")},coloroff:function(){this.validation_error_class?this.email_field.removeClass(this.validation_error_class):this.email_field.attr("style","color:#555555;")}};window.jsErrors=[],window.onerror=function(e){window.jsErrors[window.jsErrors.length]=e},$(document).ready(function(){$(".if-js").show(),$("a[data-confirm-message]").click(confirmSubmit),$("input.toggle-all").click(toggleAll),$(".event-roster td:not(.toggle-col)").click(toggleRow),$('input[type="submit"].email').click(showEmailForm),$('input[type="submit"]').click(setFormAction),$(".jump-link").click(handleJumpLink),$("input.toggle").click(handleListChanged),$(".add-more-link").shorten({moreText:"see more",lessText:""}),$(function(){$('[data-toggle="tooltip"]').tooltip()}),updateConfirmationMessage()}),$(document).ready(function(){$("form").each(function(){var e=this;if(!(null==location.search||location.search.length<1))for(var i=location.search.substring(1).split("&"),t=0;t<i.length;++t){var n=i[t].split("="),o=n[0],a=unescape(n[1].replace(/\+/g," ")),s=e.elements[o],r=null,l=!1;switch(null!=s&&(null!=s.length&&s.length>=1&&null!=s[0].type&&void 0!=s[0].type?(r=s[0].type,l=!0):r=s.type),r){case"text":case"hidden":case"textarea":l&&(s=s[0]),s.value=a,$(s).trigger("change");break;case"select-one":case"select-multiple":l&&(s=s[0]);for(var c=0;c<s.options.length;++c){var u=s.options[c],m=u.value;if(null!=m&&""!=m||(m=u.text),m==a){u.selected=!0,$(s).trigger("change");break}}break;case"checkbox":case"radio":if(l){for(var d=0;d<s.length;++d)if(s[d].value==a){s[d].checked=!0,$(s).trigger("change");break}}else s.checked=!0}}})}),function(e){e.fn.mailcheck=function(e,i){var t=["yahoo.com","google.com","hotmail.com","gmail.com","me.com","aol.com","mac.com","live.com","comcast.net","googlemail.com","msn.com","hotmail.co.uk","yahoo.co.uk","facebook.com","verizon.net","sbcglobal.net","att.net","gmx.com","mail.com"];if("object"==typeof e&&void 0===i)e.domains=e.domains||t;else{var n=e;e=i,e.domains=n||t}var o=Kicksend.mailcheck.suggest(encodeURI(this.val()),e.domains);o?e.suggested&&e.suggested(this,o):e.empty&&e.empty(this)}}(jQuery);var Kicksend={mailcheck:{threshold:3,suggest:function(e,i){e=e.toLowerCase();var t=this.splitEmail(e),n=this.findClosestDomain(t.domain,i);return!!n&&{address:t.address,domain:n,full:t.address+"@"+n}},findClosestDomain:function(e,i){for(var t,n=99,o=null,a=0;a<i.length;a++){if(e===i[a])return!1;t=this.stringDistance(e,i[a]),t<n&&(n=t,o=i[a])}return n<=this.threshold&&null!==o&&o},stringDistance:function(e,i){if(null==e||0===e.length)return null==i||0===i.length?0:i.length;if(null==i||0===i.length)return e.length;for(var t=0,n=0,o=0,a=0,s=5;t+n<e.length&&t+o<i.length;){if(e.charAt(t+n)==i.charAt(t+o))a++;else{n=0,o=0;for(var r=0;r<s;r++){if(t+r<e.length&&e.charAt(t+r)==i.charAt(t)){n=r;break}if(t+r<i.length&&e.charAt(t)==i.charAt(t+r)){o=r;break}}}t++}return(e.length+i.length)/2-a},splitEmail:function(e){var i=e.split("@");if(i.length<2)return!1;for(var t=0;t<i.length;t++)if(""===i[t])return!1;return{domain:i.pop(),address:i.join("@")}}}};!function(e){e.fn.shorten=function(i){"use strict";var t={showChars:100,minHideChars:10,ellipsesText:"...",moreText:"more",lessText:"less",onLess:function(){},onMore:function(){},errMsg:null,force:!1};return i&&e.extend(t,i),!(e(this).data("jquery.shorten")&&!t.force)&&(e(this).data("jquery.shorten",!0),e(document).off("click",".morelink"),e(document).on({click:function(){var i=e(this);return i.hasClass("less")?(i.removeClass("less"),i.html(t.moreText),i.parent().prev().animate({height:"0%"},function(){i.parent().prev().prev().show()}).hide("fast",function(){t.onLess()})):(i.addClass("less"),i.html(t.lessText),i.parent().prev().animate({height:"100%"},function(){i.parent().prev().prev().hide()}).show("fast",function(){t.onMore()})),!1}},".morelink"),this.each(function(){var i=e(this),n=i.html(),o=i.text().length;if(o>t.showChars+t.minHideChars){var a=n.substr(0,t.showChars);if(a.indexOf("<")>=0){for(var s=!1,r="",l=0,c=[],u=null,m=0,d=0;d<=t.showChars;m++)if("<"!=n[m]||s||(s=!0,u=n.substring(m+1,n.indexOf(">",m)),"/"==u[0]?u!="/"+c[0]?t.errMsg="ERROR en HTML: the top of the stack should be the tag that closes":c.shift():"br"!=u.toLowerCase()&&c.unshift(u)),s&&">"==n[m]&&(s=!1),s)r+=n.charAt(m);else if(d++,l<=t.showChars)r+=n.charAt(m),l++;else if(c.length>0){for(j=0;j<c.length;j++)r+="</"+c[j]+">";break}a=e("<div/>").html(r+'<span class="ellip">'+t.ellipsesText+"</span>").html()}else a+=t.ellipsesText;var p='<div class="shortcontent">'+a+'</div><div class="allcontent">'+n+'</div><span><a href="javascript://nop/" class="morelink">'+t.moreText+"</a></span>";i.html(p),i.find(".allcontent").hide(),e(".shortcontent p:last",i).css("margin-bottom",0)}}))}}(jQuery),function(e){"object"==typeof exports&&exports&&"object"==typeof module&&module&&module.exports===exports?e(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){function i(e){var i=e[0];return i.offsetWidth>0&&i.offsetHeight>0}function t(i){if(i.minTime&&(i.minTime=b(i.minTime)),i.maxTime&&(i.maxTime=b(i.maxTime)),i.durationTime&&"function"!=typeof i.durationTime&&(i.durationTime=b(i.durationTime)),"now"==i.scrollDefault)i.scrollDefault=function(){return i.roundingFunction(b(new Date),i)};else if(i.scrollDefault&&"function"!=typeof i.scrollDefault){var t=i.scrollDefault;i.scrollDefault=function(){return i.roundingFunction(b(t),i)}}else i.minTime&&(i.scrollDefault=function(){return i.roundingFunction(i.minTime,i)});if("string"===e.type(i.timeFormat)&&i.timeFormat.match(/[gh]/)&&(i._twelveHourTime=!0),i.showOnFocus===!1&&i.showOn.indexOf("focus")!=-1&&i.showOn.splice(i.showOn.indexOf("focus"),1),i.disableTimeRanges.length>0){for(var n in i.disableTimeRanges)i.disableTimeRanges[n]=[b(i.disableTimeRanges[n][0]),b(i.disableTimeRanges[n][1])];i.disableTimeRanges=i.disableTimeRanges.sort(function(e,i){return e[0]-i[0]});for(var n=i.disableTimeRanges.length-1;n>0;n--)i.disableTimeRanges[n][0]<=i.disableTimeRanges[n-1][1]&&(i.disableTimeRanges[n-1]=[Math.min(i.disableTimeRanges[n][0],i.disableTimeRanges[n-1][0]),Math.max(i.disableTimeRanges[n][1],i.disableTimeRanges[n-1][1])],i.disableTimeRanges.splice(n,1))}return i}function n(i){var t=i.data("timepicker-settings"),n=i.data("timepicker-list");if(n&&n.length&&(n.remove(),i.data("timepicker-list",!1)),t.useSelect){n=e("<select />",{"class":"ui-timepicker-select"});var s=n}else{n=e("<ul />",{"class":"ui-timepicker-list"});var s=e("<div />",{"class":"ui-timepicker-wrapper",tabindex:-1});s.css({display:"none",position:"absolute"}).append(n)}if(t.noneOption)if(t.noneOption===!0&&(t.noneOption=t.useSelect?"Time...":"None"),e.isArray(t.noneOption)){for(var l in t.noneOption)if(parseInt(l,10)==l){var u=o(t.noneOption[l],t.useSelect);n.append(u)}}else{var u=o(t.noneOption,t.useSelect);n.append(u)}if(t.className&&s.addClass(t.className),(null!==t.minTime||null!==t.durationTime)&&t.showDuration){"function"==typeof t.step?"function":t.step;s.addClass("ui-timepicker-with-duration"),s.addClass("ui-timepicker-step-"+t.step)}var m=t.minTime;"function"==typeof t.durationTime?m=b(t.durationTime()):null!==t.durationTime&&(m=t.durationTime);var p=null!==t.minTime?t.minTime:0,f=null!==t.maxTime?t.maxTime:p+_-1;f<p&&(f+=_),f===_-1&&"string"===e.type(t.timeFormat)&&t.show2400&&(f=_);var h=t.disableTimeRanges,$=0,y=h.length,T=t.step;"function"!=typeof T&&(T=function(){return t.step});for(var l=p,x=0;l<=f;x++,l+=60*T(x)){var S=l,C=k(S,t);if(t.useSelect){var D=e("<option />",{value:C});D.text(C)}else{var D=e("<li />");D.addClass(S%86400<43200?"ui-timepicker-am":"ui-timepicker-pm"),D.data("time",S<=86400?S:S%86400),D.text(C)}if((null!==t.minTime||null!==t.durationTime)&&t.showDuration){var M=v(l-m,t.step);if(t.useSelect)D.text(D.text()+" ("+M+")");else{var R=e("<span />",{"class":"ui-timepicker-duration"});R.text(" ("+M+")"),D.append(R)}}$<y&&(S>=h[$][1]&&($+=1),h[$]&&S>=h[$][0]&&S<h[$][1]&&(t.useSelect?D.prop("disabled",!0):D.addClass("ui-timepicker-disabled"))),n.append(D)}if(s.data("timepicker-input",i),i.data("timepicker-list",s),t.useSelect)i.val()&&n.val(a(b(i.val()),t)),n.on("focus",function(){e(this).data("timepicker-input").trigger("showTimepicker")}),n.on("blur",function(){e(this).data("timepicker-input").trigger("hideTimepicker")}),n.on("change",function(){d(i,e(this).val(),"select")}),d(i,n.val(),"initial"),i.hide().after(n);else{var F=t.appendTo;"string"==typeof F?F=e(F):"function"==typeof F&&(F=F(i)),F.append(s),c(i,n),n.on("mousedown touchstart","li",function(t){i.off("focus.timepicker"),i.on("focus.timepicker-ie-hack",function(){i.off("focus.timepicker-ie-hack"),i.on("focus.timepicker",w.show)}),r(i)||i[0].focus(),n.find("li").removeClass("ui-timepicker-selected"),e(this).addClass("ui-timepicker-selected"),g(i)&&(i.trigger("hideTimepicker"),n.on("mouseup.timepicker touchend.timepicker","li",function(e){n.off("mouseup.timepicker touchend.timepicker"),s.hide()}))})}}function o(i,t){var n,o,a;return"object"==typeof i?(n=i.label,o=i.className,a=i.value):"string"==typeof i?n=i:e.error("Invalid noneOption value"),t?e("<option />",{value:a,"class":o,text:n}):e("<li />",{"class":o,text:n}).data("time",String(a))}function a(e,i){if(e=i.roundingFunction(e,i),null!==e)return k(e,i)}function s(i){var t=e(i.target),n=t.closest(".ui-timepicker-input");0===n.length&&0===t.closest(".ui-timepicker-wrapper").length&&(w.hide(),e(document).unbind(".ui-timepicker"),e(window).unbind(".ui-timepicker"))}function r(e){var i=e.data("timepicker-settings");return(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&i.disableTouchKeyboard}function l(i,t,n){if(!n&&0!==n)return!1;var o=i.data("timepicker-settings"),a=!1,n=o.roundingFunction(n,o);return t.find("li").each(function(i,t){var o=e(t);if("number"==typeof o.data("time"))return o.data("time")==n?(a=o,!1):void 0}),a}function c(e,i){i.find("li").removeClass("ui-timepicker-selected");var t=b(m(e),e.data("timepicker-settings"));if(null!==t){var n=l(e,i,t);if(n){var o=n.offset().top-i.offset().top;(o+n.outerHeight()>i.outerHeight()||o<0)&&i.scrollTop(i.scrollTop()+n.position().top-n.outerHeight()),n.addClass("ui-timepicker-selected")}}}function u(i,t){if(""!==this.value&&"timepicker"!=t){var n=e(this);if(!n.is(":focus")||i&&"change"==i.type){var o=n.data("timepicker-settings"),a=b(this.value,o);if(null===a)return void n.trigger("timeFormatError");var s=!1;null!==o.minTime&&a<o.minTime&&null!==o.maxTime&&a>o.maxTime&&(s=!0),e.each(o.disableTimeRanges,function(){if(a>=this[0]&&a<this[1])return s=!0,!1}),o.forceRoundTime&&(a=o.roundingFunction(a,o));var r=k(a,o);s?d(n,r,"error")&&n.trigger("timeRangeError"):d(n,r)}}}function m(e){return e.is("input")?e.val():e.data("ui-timepicker-value")}function d(e,i,t){if(e.is("input")){e.val(i);var n=e.data("timepicker-settings");n.useSelect&&"select"!=t&&"initial"!=t&&e.data("timepicker-list").val(a(b(i),n))}return e.data("ui-timepicker-value")!=i?(e.data("ui-timepicker-value",i),"select"==t?e.trigger("selectTime").trigger("changeTime").trigger("change","timepicker"):"error"!=t&&e.trigger("changeTime"),!0):(e.trigger("selectTime"),!1)}function p(e){switch(e.keyCode){case 13:case 9:return;default:e.preventDefault()}}function f(t){var n=e(this),o=n.data("timepicker-list");if(!o||!i(o)){if(40!=t.keyCode)return!0;w.show.call(n.get(0)),o=n.data("timepicker-list"),r(n)||n.focus()}switch(t.keyCode){case 13:return g(n)&&w.hide.apply(this),t.preventDefault(),!1;case 38:var a=o.find(".ui-timepicker-selected");return a.length?a.is(":first-child")||(a.removeClass("ui-timepicker-selected"),a.prev().addClass("ui-timepicker-selected"),a.prev().position().top<a.outerHeight()&&o.scrollTop(o.scrollTop()-a.outerHeight())):(o.find("li").each(function(i,t){if(e(t).position().top>0)return a=e(t),!1}),a.addClass("ui-timepicker-selected")),!1;case 40:return a=o.find(".ui-timepicker-selected"),0===a.length?(o.find("li").each(function(i,t){if(e(t).position().top>0)return a=e(t),!1}),a.addClass("ui-timepicker-selected")):a.is(":last-child")||(a.removeClass("ui-timepicker-selected"),a.next().addClass("ui-timepicker-selected"),a.next().position().top+2*a.outerHeight()>o.outerHeight()&&o.scrollTop(o.scrollTop()+a.outerHeight())),!1;case 27:o.find("li").removeClass("ui-timepicker-selected"),w.hide();break;case 9:w.hide();break;default:return!0}}function h(t){var n=e(this),o=n.data("timepicker-list"),a=n.data("timepicker-settings");if(!o||!i(o)||a.disableTextInput)return!0;switch(t.keyCode){case 96:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 65:case 77:case 80:case 186:case 8:case 46:a.typeaheadHighlight?c(n,o):o.hide()}}function g(e){var i=e.data("timepicker-settings"),t=e.data("timepicker-list"),n=null,o=t.find(".ui-timepicker-selected");return!o.hasClass("ui-timepicker-disabled")&&(o.length&&(n=o.data("time")),null!==n&&("string"!=typeof n&&(n=k(n,i)),d(e,n,"select")),!0)}function v(e,i){e=Math.abs(e);var t,n,o=Math.round(e/60),a=[];return o<60?a=[o,$.mins]:(t=Math.floor(o/60),n=o%60,30==i&&30==n&&(t+=$.decimal+5),a.push(t),a.push(1==t?$.hr:$.hrs),30!=i&&n&&(a.push(n),a.push($.mins))),a.join(" ")}function k(i,t){if("number"!=typeof i)return null;var n=parseInt(i%60),o=parseInt(i/60%60),a=parseInt(i/3600%24),s=new Date(1970,0,2,a,o,n,0);if(isNaN(s.getTime()))return null;if("function"===e.type(t.timeFormat))return t.timeFormat(s);for(var r,l,c="",u=0;u<t.timeFormat.length;u++)switch(l=t.timeFormat.charAt(u)){case"a":c+=s.getHours()>11?$.pm:$.am;break;case"A":c+=s.getHours()>11?$.PM:$.AM;break;case"g":r=s.getHours()%12,c+=0===r?"12":r;break;case"G":r=s.getHours(),i===_&&(r=t.show2400?24:0),c+=r;break;case"h":r=s.getHours()%12,0!==r&&r<10&&(r="0"+r),c+=0===r?"12":r;break;case"H":r=s.getHours(),i===_&&(r=t.show2400?24:0),c+=r>9?r:"0"+r;break;case"i":var o=s.getMinutes();c+=o>9?o:"0"+o;break;case"s":n=s.getSeconds(),c+=n>9?n:"0"+n;break;case"\\":u++,c+=t.timeFormat.charAt(u);break;default:c+=l}return c}function b(e,i){if(""===e||null===e)return null;if("object"==typeof e)return 3600*e.getHours()+60*e.getMinutes()+e.getSeconds();if("string"!=typeof e)return e;e=e.toLowerCase().replace(/[\s\.]/g,""),"a"!=e.slice(-1)&&"p"!=e.slice(-1)||(e+="m");var t="("+$.am.replace(".","")+"|"+$.pm.replace(".","")+"|"+$.AM.replace(".","")+"|"+$.PM.replace(".","")+")?",n=new RegExp("^"+t+"([0-9]?[0-9])\\W?([0-5][0-9])?\\W?([0-5][0-9])?"+t+"$"),o=e.match(n);if(!o)return null;var a=parseInt(1*o[2],10),s=a>24?a%24:a,r=o[1]||o[5],l=s;if(s<=12&&r){var c=r==$.pm||r==$.PM;l=12==s?c?12:0:s+(c?12:0)}var u=1*o[3]||0,m=1*o[4]||0,d=3600*l+60*u+m;if(s<12&&!r&&i&&i._twelveHourTime&&i.scrollDefault){var p=d-i.scrollDefault();p<0&&p>=_/-2&&(d=(d+_/2)%_)}return d}var _=86400,$={am:"am",pm:"pm",AM:"AM",PM:"PM",decimal:".",mins:"mins",hr:"hr",hrs:"hrs"},w={init:function(i){return this.each(function(){var o=e(this),a=[];for(var s in e.fn.timepicker.defaults)o.data(s)&&(a[s]=o.data(s));var r=e.extend({},e.fn.timepicker.defaults,a,i);if(r.lang&&($=e.extend($,r.lang)),r=t(r),o.data("timepicker-settings",r),o.addClass("ui-timepicker-input"),r.useSelect)n(o);else{if(o.prop("autocomplete","off"),r.showOn)for(var l in r.showOn)o.on(r.showOn[l]+".timepicker",w.show);o.on("change.timepicker",u),o.on("keydown.timepicker",f),o.on("keyup.timepicker",h),r.disableTextInput&&o.on("keydown.timepicker",p),r.disableInitFormat&&u.call(o.get(0))}})},show:function(t){var o=e(this),a=o.data("timepicker-settings");if(t&&t.preventDefault(),a.useSelect)return void o.data("timepicker-list").focus();r(o)&&o.blur();var u=o.data("timepicker-list");if(!o.prop("readonly")&&(u&&0!==u.length&&"function"!=typeof a.durationTime||(n(o),u=o.data("timepicker-list")),!i(u))){o.data("ui-timepicker-value",o.val()),c(o,u),w.hide(),u.show();var d={};a.orientation.match(/r/)?d.left=o.offset().left+o.outerWidth()-u.outerWidth()+parseInt(u.css("marginLeft").replace("px",""),10):d.left=o.offset().left+parseInt(u.css("marginLeft").replace("px",""),10);var p;p=a.orientation.match(/t/)?"t":a.orientation.match(/b/)?"b":o.offset().top+o.outerHeight(!0)+u.outerHeight()>e(window).height()+e(window).scrollTop()?"t":"b","t"==p?(u.addClass("ui-timepicker-positioned-top"),d.top=o.offset().top-u.outerHeight()+parseInt(u.css("marginTop").replace("px",""),10)):(u.removeClass("ui-timepicker-positioned-top"),d.top=o.offset().top+o.outerHeight()+parseInt(u.css("marginTop").replace("px",""),10)),u.offset(d);var f=u.find(".ui-timepicker-selected");if(!f.length){var h=b(m(o));null!==h?f=l(o,u,h):a.scrollDefault&&(f=l(o,u,a.scrollDefault()))}if(f&&f.length){var g=u.scrollTop()+f.position().top-f.outerHeight();u.scrollTop(g)}else u.scrollTop(0);return a.stopScrollPropagation&&e(document).on("wheel.ui-timepicker",".ui-timepicker-wrapper",function(i){i.preventDefault();var t=e(this).scrollTop();e(this).scrollTop(t+i.originalEvent.deltaY)}),e(document).on("touchstart.ui-timepicker mousedown.ui-timepicker",s),e(window).on("resize.ui-timepicker",s),a.closeOnWindowScroll&&e(document).on("scroll.ui-timepicker",s),o.trigger("showTimepicker"),this}},hide:function(t){var n=e(this),o=n.data("timepicker-settings");return o&&o.useSelect&&n.blur(),e(".ui-timepicker-wrapper").each(function(){var t=e(this);if(i(t)){var n=t.data("timepicker-input"),o=n.data("timepicker-settings");o&&o.selectOnBlur&&g(n),t.hide(),n.trigger("hideTimepicker")}}),this},option:function(i,o){return"string"==typeof i&&"undefined"==typeof o?e(this).data("timepicker-settings")[i]:this.each(function(){var a=e(this),s=a.data("timepicker-settings"),r=a.data("timepicker-list");"object"==typeof i?s=e.extend(s,i):"string"==typeof i&&(s[i]=o),s=t(s),a.data("timepicker-settings",s),r&&(r.remove(),a.data("timepicker-list",!1)),s.useSelect&&n(a)})},getSecondsFromMidnight:function(){return b(m(this))},getTime:function(e){var i=this,t=m(i);if(!t)return null;var n=b(t);if(null===n)return null;e||(e=new Date);var o=new Date(e);return o.setHours(n/3600),o.setMinutes(n%3600/60),o.setSeconds(n%60),o.setMilliseconds(0),o},isVisible:function(){var e=this,t=e.data("timepicker-list");return!(!t||!i(t))},setTime:function(e){var i=this,t=i.data("timepicker-settings");if(t.forceRoundTime)var n=a(b(e),t);else var n=k(b(e),t);return e&&null===n&&t.noneOption&&(n=e),d(i,n),i.data("timepicker-list")&&c(i,i.data("timepicker-list")),this},remove:function(){var e=this;if(e.hasClass("ui-timepicker-input")){var i=e.data("timepicker-settings");return e.removeAttr("autocomplete","off"),e.removeClass("ui-timepicker-input"),e.removeData("timepicker-settings"),e.off(".timepicker"),e.data("timepicker-list")&&e.data("timepicker-list").remove(),i.useSelect&&e.show(),e.removeData("timepicker-list"),this}}};e.fn.timepicker=function(i){return this.length?w[i]?this.hasClass("ui-timepicker-input")?w[i].apply(this,Array.prototype.slice.call(arguments,1)):this:"object"!=typeof i&&i?void e.error("Method "+i+" does not exist on jQuery.timepicker"):w.init.apply(this,arguments):this},e.fn.timepicker.defaults={appendTo:"body",className:null,closeOnWindowScroll:!1,disableTextInput:!1,disableTimeRanges:[],disableTouchKeyboard:!1,disableInitFormat:!1,durationTime:null,forceRoundTime:!1,maxTime:null,minTime:null,noneOption:!1,orientation:"l",roundingFunction:function(e,i){if(null===e)return null;if("number"!=typeof i.step)return e;var t=e%(60*i.step);return t>=30*i.step?e+=60*i.step-t:e-=t,e==_&&i.show2400?e:e%_},scrollDefault:null,selectOnBlur:!1,show2400:!1,showDuration:!1,showOn:["click","focus"],showOnFocus:!0,step:30,stopScrollPropagation:!1,timeFormat:"g:ia",typeaheadHighlight:!0,useSelect:!1}});var SMS_SUBSCRIBE_DIV="#id_subscribe_sms";!function(){var e=$(SMS_SUBSCRIBE_DIV).attr("data-phonemobile")||"";if(/opt-out-email-/.test(e)){/opt-out-email-hidden/.test(e)&&($("#id_email_box").hide(),$("#id_sms_subscribed").change(function(){this.checked||$("#id_email_box").show()})),window.actionkit.form.email=!1;var i=actionkit.forms.required;actionkit.forms.required=function(){var e=i();return $(e).filter(function(){return"email"!=this})},$("#id_email").removeAttr("required")}}();var mobilePhoneUpdate=function(){if($(this).val().replace(/\D/g,"").length>=10){var e=$(SMS_SUBSCRIBE_DIV).attr("data-phonemobile")||"";/opt-out/.test(e)&&($("#id_sms_subscribed").prop("checked",!0),$("#id_sms_subscribed").val("sms_subscribed")),$(SMS_SUBSCRIBE_DIV).show()}};$("input[name=phone],input[name=mobile_phone]").on("change unfocus",mobilePhoneUpdate).each(mobilePhoneUpdate),$("form[name=act]").on("actionkitbeforevalidation",function(){window.console&&console.log("actionkitbefore validation! (mobile check)");var e=$("input[name=phone],input[name=mobile_phone]").val(),i=$("#id_sms_subscribed",SMS_SUBSCRIBE_DIV).prop("checked");"string"!=typeof e&&(e=""),e=e.replace(/\D/g,""),i&&e&&e.length>=10&&(window.console&&console.log("in mobile pathway, before validation"),""===$("#id_email").val()&&($("#id_suppress_subscribe").val("1"),$("#id_email").val(e+"-smssubscriber@example.com"),$("#id_email_box").hide()),$("#id_phone_type").val("mobile"),$("#id_sms_subscribed").val("sms_subscribed"),$("#id_action_mobilesubscribe").val("1"),$("#id_sms_termsandconditions").val("sms_termsandconditions"),$("#id_robodial_termsandconditions").val("yes"))}),$("form.external-ak").on("submit",function(){var e=$("input[name=phone],input[name=mobile_phone]").val().replace(/\D/g,""),i=$("#id_sms_subscribed",SMS_SUBSCRIBE_DIV).prop("checked");i&&e&&e.length>=10&&(""===$("#id_email").val()&&($("#id_suppress_subscribe").val("1"),$("#id_email").val(e+"-smssubscriber@example.com"),$("#id_email_box").hide()),$("#id_phone_type").val("mobile"),$("#id_sms_subscribed").val("sms_subscribed"),$("#id_action_mobilesubscribe").val("1"),$("#id_sms_termsandconditions").val("sms_termsandconditions"),$("#id_robodial_termsandconditions").val("yes"))});var phoneFieldStorage=function(){window.console&&console.log("actionkitbefore validation (phoneFieldStorage)");var e=$("input[name=phone],input[name=mobile_phone],input[name=home_phone]").val();if("string"!=typeof e&&(e=""),e=e.replace(/\D/g,""),e&&e.length>=10){var i=$("input[name=user_recent_phone]",this),t=$("input[name=action_phone]",this);i.length||(i=$('<input type="hidden" name="user_recent_phone" />').appendTo(this)),t.length||(t=$('<input type="hidden" name="action_phone" />').appendTo(this)),t.val(e),i.val(e)}};$("form[name=act]").on("actionkitbeforevalidation",phoneFieldStorage),$("form.external-ak").on("submit",phoneFieldStorage),$(document).ready(shuffleQuestions),$(document).ready(function(){var e=$('<div class="col-md-8 checkbox"></div>'),i=$('<input type="checkbox" name="retired" />').click(function(){var e=$(this),i=$("#employer-occupation-info");e.is(":checked")?(i.addClass("hidden"),i.find("#action_employer").val("None"),i.find("#action_occupation").val("Not employed")):i.removeClass("hidden")}),t=$('<label for="retired"> </label>'),n=$("<span>I am retired or unemployed</span>").click(function(){$("input[name=retired]").click()});t.prepend(i).append(n),e.append(t),$("#retired-checkbox").append(e)}),$(document).ready(function(){$("body").hasClass("mobile-survey")&&$(".form-section").length>0&&!isScrolledIntoView("[data-viewable]")&&makeFormButton()});